<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/font-awesome.min.css">
  <link href="http://littlezz.github.io/static/custom.css" rel="stylesheet">
  <link href="http://littlezz.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="littlezz's Blog Atom">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />
  <meta name="author" content="littlezz" />
  <meta name="description" content="littlezz's Thoughts and Writings About Python And Machine Learning and diary" />
<meta property="og:site_name" content="littlezz's Blog"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="littlezz's Blog"/>
<meta property="og:description" content="littlezz's Thoughts and Writings About Python And Machine Learning and diary"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://littlezz.github.io"/>
<meta property="og:image" content="/images/logo.jpg">
  <title>littlezz's Blog</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://littlezz.github.io">
        <img src="/images/logo.jpg" alt="littlezz" title="littlezz">
      </a>
      <h1><a href="http://littlezz.github.io">littlezz</a></h1>
      <p>当我被狗日时， 我在想些什么</p>
      <nav>
        <ul class="list">
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-github" href="https://github.com/littlezz/" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://littlezz.github.io">Home</a>
      <a href="/categories">Category</a>
      <a href="/tags">Tags</a>
      <a href="http://littlezz.github.io/feeds/all.atom.xml">Atom</a>
    </nav>

<article>
  <header>
    <h2><a href="http://littlezz.github.io/how-to-upload-package-to-pypi.html#how-to-upload-package-to-pypi">How to upload package to pypi</a></h2>
    <p>
      Posted on Sun 15 May 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <h2 id="install-twine"><a name="user-content-install-twine" href="#install-twine" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Install twine</h2>
<p><code>pip install twine</code></p>
<h2 id="init-file"><a name="user-content-init-file" href="#init-file" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Init file</h2>
<p>First of all, make sure that the structure of project is correct. Says, your project code in a folder call 'foo', then you have <code>README</code> and some other files in the same level.  </p>
<p>For example, </p>
<div class="highlight"><pre><span></span>.
├── foo
│   └── a.py
└── readme.md
</pre></div>


<p>Secondly, add specify file to the root folder.  </p>
<ul>
<li>README.rst  </li>
<li>MANIFEST.in  </li>
<li>setup.py  </li>
<li>setup.cfg(option)</li>
</ul>
<p>pypi do not know markdown format readme, there is only rst format available.</p>
<h2 id="setuppy"><a name="user-content-setuppy" href="#setuppy" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>setup.py</h2>
<p>look at<br />
<a href="https://github.com/pypa/sampleproject/blob/master/setup.py">https://github.com/pypa/sampleproject/blob/master/setup.py</a></p>
<p>after finish <code>setup.py</code><br />
you can use   </p>
<p><code>pip install -e .</code><br />
install package locally on editable mode.<br />
It will also install dependency.  </p>
<h2 id="make-dist"><a name="user-content-make-dist" href="#make-dist" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Make dist</h2>
<h3 id="build-source-distribution"><a name="user-content-build-source-distribution" href="#build-source-distribution" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Build source distribution</h3>
<p>run<br />
<code>python setup.py sdist</code>  </p>
<h3 id="build-wheel"><a name="user-content-build-wheel" href="#build-wheel" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Build wheel.</h3>
<p>If your code compat py2 and py3.<br />
<code>python setup.py bdist_wheel --universal</code>  </p>
<p>else, <br />
<code>python setup.py bdist_wheel</code>  </p>
<p>if your code is specify for some python version, add python tag in <code>setup.cfg</code>  </p>
<p>For example, if your code is only available in py3.5 and 3.4 </p>
<div class="highlight"><pre><span></span><span class="k">[bdist_wheel]</span>
<span class="na">python-tag</span> <span class="o">=</span> <span class="s">py35, py34</span>
</pre></div>


<h2 id="upload"><a name="user-content-upload" href="#upload" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Upload</h2>
<p>look at <a href="http://python-packaging-user-guide.readthedocs.io/en/latest/distributing/#uploading-your-project-to-pypi">http://python-packaging-user-guide.readthedocs.io/en/latest/distributing/#uploading-your-project-to-pypi</a>  </p>
<p>Create a account on pypi, register your package,  write a <code>~/.pypirc</code> </p>
<div class="highlight"><pre><span></span><span class="k">[distutils]</span>
<span class="na">index-servers</span><span class="o">=</span><span class="s">pypi</span>

<span class="k">[pypi]</span>
<span class="na">repository</span> <span class="o">=</span> <span class="s">https://pypi.python.org/pypi</span>
<span class="na">username</span> <span class="o">=</span> <span class="s">&lt;username&gt;</span>
<span class="na">password</span> <span class="o">=</span> <span class="s">&lt;password&gt;</span>
</pre></div>


<p>left the password empty, you can use twine with <code>-p PASSWORD</code>.  </p>
<p>upload your dist folder  </p>
<p><code>twine upload dist/*</code>  </p>
<h2 id="reference"><a name="user-content-reference" href="#reference" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Reference</h2>
<ul>
<li><a href="http://python-packaging-user-guide.readthedocs.io/en/latest/distributing/">http://python-packaging-user-guide.readthedocs.io/en/latest/distributing/</a>  </li>
<li><a href="http://peterdowns.com/posts/first-time-with-pypi.html">http://peterdowns.com/posts/first-time-with-pypi.html</a>  </li>
</ul>
<p>2016-05-15 11:43:33</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/ri-ben-dong-hua-ren-zhan-lan-hui-zong-jie-yu-tui-jian.html#ri-ben-dong-hua-ren-zhan-lan-hui-zong-jie-yu-tui-jian">日本动画人展览会总结与推荐</a></h2>
    <p>
      Posted on Thu 21 April 2016 in <a href="http://littlezz.github.io/category/acg.html">ACG</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>,      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>    </p>
  </header>
  <div>
      <p>首先， 不得不提关于这个展览会的纪录片 《庵野先生与我们的莽撞挑战 日本动画人展览会》  </p>
<p>5分钟的动画， 制作时间往往是好几个月， 途中经历的种种困难， 特别是对于新人监督， 经验不足，在现场时的时候很难控制场面。比如第32话的监督， 在配音时说希望林原惠用更成熟一点的语气， 结果林原惠反问『请问监督眼中的成熟是什么呢？ 我没有从人物的脸上看到成熟的气质。』。 然后监督直接吓懵逼，一个工作人员默默递给监督一个红绿按钮的选择键盘，全场没有人敢讲话， 只有监督不断翻着台本的声音。   最后还是林原惠救场， 说在刚才的基础上用更低沉的语气。 监督说很好， 这样就好。 </p>
<p>旁白一针见血的说『现在监督一点很后悔吧』。<br />
但是很多问题最后可能只能妥协。<br />
毕竟学会妥协也是成为优秀监督的必要能力。。。。  </p>
<p>好了， 开始记录那些我喜欢的作品吧。<br />
基于看过纪录片的原因， 我先说32话， 之后的按顺序。  </p>
<h3 id="32"><a name="user-content-32" href="#32" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>32 新世紀いんぱくつ。</h3>
<p>和eva是同一个时间观的， 我特别去看了之前监督和林原惠意见冲突的地方， 讲道理， 其实还是林原惠说得对。。。<del>那张脸上面看不出所谓的成熟</del><br />
然后歌很好听， 非常好听， 背景也非常美，再配上百合， 百合！百合！林原精分现场！自己和自己百合！！  我吼兴奋， 我吼兴奋啊啊啊啊啊啊啊啊啊啊wwww， 可以循环看好多遍。 <br />
<del>我的偶像不可能变成橙汁</del>  </p>
<h3 id="1"><a name="user-content-1" href="#1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>1 龍の歯医者</h3>
<p>恢弘大作的感觉， 嗯， BGM也很恢弘， 作画也很酷炫。  </p>
<h3 id="2-hill-climb-girl"><a name="user-content-2-hill-climb-girl" href="#2-hill-climb-girl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>2 HILL CLIMB GIRL</h3>
<p>感觉上是秀3D技术的， 然而我觉得里面的歌曲很好听。  </p>
<h3 id="3-mememe"><a name="user-content-3-mememe" href="#3-mememe" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>3 ME!ME!ME!</h3>
<p>这个不用说了， 很多人说神作啦， 和EVA说的是一个事情啦， 更加容易懂啦， 实用啦。 各种各样。<br />
想要补充的就是其实庵野是没有参与进来的。。。<br />
蛮好看的， 值得一看。 卖肉新高度。而且很带感。有很多符号元素。 总之看得开心就是好的。 </p>
<h3 id="4-carnage"><a name="user-content-4-carnage" href="#4-carnage" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>4 Carnage</h3>
<p>和上一个作品形成鲜明的对比。 <br />
这部作品非常有表现力。<br />
《ME!ME!ME!》 的主题是美少女， 而这部作品的主题是表现故事， 人物和剧情， 都只是表现的手段而已。 当然很多人可能会说『这画风我不喜欢』。 然后结束观看， 然后接着对mememe撸。  </p>
<p>可是我tm真的好喜欢！<br />
那帅到炸裂的分镜， 没有矫揉造作的卖萌，一股浓浓的黑暗风格。 干净利落， 没有多余的台词， 关键的剧情全部用镜头来表达。  </p>
<p>这他妈就是艺术品啊。  </p>
<p>《ME!ME!ME!》确实取得了很高的人气， 如果是真的变成作品放送的话， 多半情况下也是ME!ME!ME!》热卖， 而本作暴死。  </p>
<p>但是总得有人做像《Carnage》这样的动画， 这种东西才称得上是所谓的『动画未来』。 其他的像《mememe》这种模式，商业运作成功， 无可厚非， 毕竟卖bd卖人设，赚了钱活下去才是王道。 但是如果一辈子都干这种事情，而且还时不时披上一个『内涵作』这样的外衣的话，我觉得真的是有点的恶心。  </p>
<h3 id="6-202ldk2"><a name="user-content-6-202ldk2" href="#6-202ldk2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>6 西荻窪駅徒歩20分2LDK敷礼2ヶ月ペット不可</h3>
<p>和第四话一样， 剧情非常有趣， 动作非常非常的流畅， 非常推荐。  这部作品在纪录片里面有提到。  </p>
<h3 id="10"><a name="user-content-10" href="#10" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>10 ヤマデロイド</h3>
<p>这个也很好看， 配合一首歌曲讲了一个故事， 节奏非常带感， 而且没有对白， 全部用镜头语言来讲故事， 比现在的一些动画恨不得配角24小时全程解说不知道要高到哪里去。  </p>
<p>但是有一点， 这个人脸的画风， 23333 不行， 我一开始以为是要全程颜艺， 但是看旧了好像还是蛮带感的。  </p>
<p>总之很推荐， 剧情也很有爱。  </p>
<h3 id="11-power-plant-no33"><a name="user-content-11-power-plant-no33" href="#11-power-plant-no33" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>11 POWER PLANT No.33</h3>
<p>Trigger， 今石洋之办的那家工作室。<br />
科幻类的，没什么要说的， 值得一看。 ed很好听。  </p>
<h3 id="12-evangelion-another-impactconfidential"><a name="user-content-12-evangelion-another-impactconfidential" href="#12-evangelion-another-impactconfidential" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>12 [evangelion： Another Impact（Confidential）</h3>
<p>卧槽， 说老实话， 我光看画面我真的分不清到底是3D的还是特摄片。  </p>
<p>怕了。  </p>
<h3 id="13-kanon"><a name="user-content-13-kanon" href="#13-kanon" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>13 Kanón</h3>
<p>和其他的不同， 这部全程在说话， 应该是讨论一些东西， 可能是讨论作品和观众的问题吧。<br />
看得下去的话可以一看。  </p>
<h3 id="14-sexviolence-with-machspeed"><a name="user-content-14-sexviolence-with-machspeed" href="#14-sexviolence-with-machspeed" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>14 Sex&amp;VIOLENCE with MACHSPEED</h3>
<p>我是看完这部才想着搞一个总结的。<br />
我最近遇上一些讨厌的事情， 没有什么道理可以讲， 对面只会不断的追问『你为什么』 和『你凭什么』。 就像这部作品所表达的东西一样： 没有为什么， 我tm就是要为之一战。</p>
<p>这可能是现在无可奈何的我内心深处非常羡慕敢想而不敢讲的东西吧。  </p>
<p>2016年04月21日21:41:15   </p>
<h3 id="15"><a name="user-content-15" href="#15" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>15 おばけちゃん</h3>
<p>2333<br />
好有趣， 前面都是一点蠢萌蠢萌的片段，全都是neta， 但是如果坚持到最后， 会有好的收获的。  </p>
<p>而且， ed是重点， 最后出现了鹤卷和哉！</p>
<h3 id="16"><a name="user-content-16" href="#16" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>16</h3>
<p>这什么鬼。。。<br />
剧情一头雾水， 然后各种风格的混搭， 设定的不明。<br />
总之我觉得不好看。</p>
<h3 id="17"><a name="user-content-17" href="#17" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>17 三本の証言者</h3>
<p>卧槽， 居然是剧情片， 短篇+剧情=很难看懂。<br />
不过还是值得一看的。  </p>
<h3 id="19-i-can-friday-by-day"><a name="user-content-19-i-can-friday-by-day" href="#19-i-can-friday-by-day" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>19 I can Friday by day!</h3>
<p>卧槽！！！<br />
我就是在找这个啊，  监督是 <strong>鹤卷和哉</strong> !重复一遍， 监督是鹤卷和哉！ </p>
<p>别废话了， 抓紧看吧， 和flcl一样的感觉， 猜不到开头， 更加猜不到结尾。</p>
<p>2016年04月22日03:20:30</p>
<h3 id="22"><a name="user-content-22" href="#22" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>22 イブセキヨルニ</h3>
<p>这个东西讨论到政治了。<br />
和我当初看这个博览会的注重点不同， 不过老实话， 监督脑洞真是大， 真敢拍啊。  </p>
<p>没看的话可以看一下。  </p>
<h3 id="25"><a name="user-content-25" href="#25" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>25 ハンマーヘッド</h3>
<p>妈的， 一股沙耶之歌的感觉。<br />
卧槽， 还是给我看一集萌妹中和一下吧我的天， 这从20 开始的一系列都是药吃多了么。  </p>
<p>和前面一样， 没看的话可以看一下。  </p>
<h3 id="26-1989"><a name="user-content-26-1989" href="#26-1989" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>26 コント  ころしや　1989</h3>
<p>这个很有趣。 简直是超展开。  </p>
<h3 id="29"><a name="user-content-29" href="#29" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>29 ヒストリー機関</h3>
<p>可以一看。<br />
一开始看我以为又是政治片， 结果看到后面发现是脑洞片。<br />
说老实话， 我比较想看的是表现手法， 即， 我认为， 举办这个活动的目的是抛开商业， 抛开蓝光销量， 抛开各种制约，你会怎么做动画片，你会用什么样的形式你有什么样没有敢实践的创意。 而不是一说到自由创作， 就想方设法展现自己对政治对人类历史的洞见，找一些看似高深的角度， 然后做一下浅薄幼稚的讨论。<br />
有些东西， 需要去看书去明白， 而不是看几集动画片就能说清楚的， 拼命的传达自己的见解， 丧失了最基础的娱乐性， 只剩说教， 那观众为何不去看公开课？<br />
（<del>没错， 我说的就是那种整天一副讨论正义是什么的动画</del>） </p>
<h3 id="31-girl"><a name="user-content-31-girl" href="#31-girl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>31 GIRL</h3>
<p>和mememe一样的团队做的（没错， 就是那两个人）.<br />
本来没什么好说的， 但是想了一下， 那个眼睛的画法真的很好的表达了人物一副不知道在想什么而且还很容易冷场的形象。<br />
而且我感觉这个画面实在是太华丽了吧。 我的天。  </p>
<h3 id="34"><a name="user-content-34" href="#34" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>34 旅のロボから</h3>
<p>卧槽， 监督在业界是被称为师匠的男人。<br />
真的是不一样啊。mememe的作画监督说自己非常崇拜他， 说他有某种特别的特质， 才能画出这样工口感这么强的画。<br />
我感觉这个人对生活的观察非常的细腻。 如果说mememe的作者在发掘美少女设计上面独树一帜的话， 那么本作的监督则是在美少女的动作方面达到了超一流。  </p>
<p>里面美少女的动作， 非常的流畅， 非常的写实，所以能够让人感觉『生动』。<br />
之前有个笑话是嘲笑部分画师画妹子泡温泉的时候头发是披下来的， 说可怜的死宅， 连妹子的手都没有摸过2333.<br />
那么本作的监督绝对是那种知道要让妹子把头发盘起来， 同时还能把怎么盘的具体动作画出来，而且还画得超乎想象的优雅的那种。  </p>
<p>不愧是『师匠』  </p>
<p>这种感觉， 就想白箱里面的那个老一代的画师， 基础功扎实到可怕， 不是现在的画师能够随便超越的那种存在。  </p>
<p><del>我觉得特别的特质之一是人家有女朋友吧喂！</del></p>
<h3 id="35"><a name="user-content-35" href="#35" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>35 カセットガール</h3>
<p>这个。。。这个。。 这个是向庵野秀明毕业作品致敬么？  </p>
<p>2016年04月25日00:02:40</p>
<h3 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>最后</h3>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/guan-yu-wo-bu-zai-de-jie-dao-ping-fen-de-yi-dian-si-kao.html#guan-yu-wo-bu-zai-de-jie-dao-ping-fen-de-yi-dian-si-kao">关于《我不在的街道》评分的一点思考</a></h2>
    <p>
      Posted on Mon 04 April 2016 in <a href="http://littlezz.github.io/category/acg.html">ACG</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>,      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p>我给了9分（神作）  </p>
<p>刚看完的时候， 对于那个操蛋的结尾， 我也是想打七分的， 但是觉得实在太低， 对不起那个惊艳的开头， 于是给八分。  </p>
<p>过了1天， 我连续半话弃掉了3部番， 其中包括《fate stay night UBW》， 我在群里面说， 『不行， 刚看完扑街， 其他番根本没有办法看， 全部半话弃』<br />
直到此刻， 我才明白， 有多少番， 我甚至没有办法看完第一话， 更不用说考虑什么剧情了。  </p>
<p>我开始察觉到自己， 以及大部分人的可笑。<br />
一副严肃认真， 公平正义的态度， 打上一个完全主观的分数， 留下一句似是而非的自己评分准则。<br />
俨然一副资深人士的样子。  </p>
<p>然而来来回回， 不还是局限在剧情方面？<br />
一部动画， 构图， 分镜， 配音， 上色， 配乐等等， 这么多元素在里面， 最后大家却振振有词的依据剧情来打分， 还能说得头头是道。  </p>
<p>我才明白当时的我也是如此， 也就是在那时， 我才会想起我起初看这个动画的时候的兴奋之情， 我大呼卧槽， 我呼啦一下打开房间的门， 我走到从来不看番的室友的房间， 我说， 卧槽， 我要通宵看完这部番了， 我已经有几年没有这种想要通宵看番的冲动了， 上一次这样还是高中， 看得是石头门。<br />
我在一集结束的时候， 高呼悠木碧， 棒啊啊啊啊。 我说， fuck them all！ 到后面， 我室友都跑过来我们两个熬夜看番了。  </p>
<p>也就是那时， 我才会想起， 有多少回， 我被里面的一幕触动到， 我说， 就凭此刻， 足以封神。   </p>
<p>所以我改成了9分， 为了我当初的承诺， 为了第二话那句『原来我也有过这样的时间啊』， 为了在记录那时感想时触动的回忆让我流着泪写完观后感。  </p>
<p>如果此刻我还保持着一副正人君子， 道貌岸然， 满口胡言的扯着剧情的『公平之人』， 那我就是一个双料的傻瓜。  </p>
<p>干他娘的， 我就是要给9分， 有傻逼打低分， 为什么我就不能打高分？  </p>
<p>说到底， 为什么作品的排名会被高低分这种东西牵制。 或者说如何排除傻逼对一个作品的影响。  </p>
<p>投票者投票表决天才， 但是有一个前提是， 如何保证投票者本身不是平庸之流。  </p>
<p>抛开知乎这种社交性质的网站不谈， 如果是这种个人评分性质，带有很重的个人主观口味性质的，但是最后却是统计平均数的网站来看。 应该首先匹配评分者中和当前用户匹配率高的用户， 重新分配权重。  </p>
<p>咦， 这不就是协同过滤么。。。  </p>
<p>说来， 要先解决计算用户之间的距离的问题， 然后重新分配权重， 然后重新得到分数， 卧槽， 简单啊。  </p>
<p>我是不是可以去写一个啊。。。？  </p>
<p>看情况， 先把之前的坑给填了先。  </p>
<p>2016年04月04日19:37:51</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/travis-ci-with-numpy-and-pytest.html#travis-ci-with-numpy-and-pytest">Travis CI with Numpy and Pytest</a></h2>
    <p>
      Posted on Thu 31 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p>It takes long time to install scientific python package by <code>pip</code> in travis and sometime fail.  </p>
<p>The solve is to use conda to install binary package. <br />
<a href="http://conda.pydata.org/docs/travis.html">http://conda.pydata.org/docs/travis.html</a>  </p>
<p>Note that some package not in conda, you can use <code>pip</code> install it, for example, <code>py.test</code>  </p>
<p>Here is my <a href="https://github.com/littlezz/ESL-Model">ESL-Model</a> .trais.yml, you can view on github <a href="https://github.com/littlezz/ESL-Model/blob/master/.travis.yml">https://github.com/littlezz/ESL-Model/blob/master/.travis.yml</a>  </p>
<p><div class="highlight"><pre><span></span>language: python
python:
  <span class="c1"># We don&#39;t actually use the Travis Python, but this keeps it organized.</span>
  - <span class="s2">&quot;3.5&quot;</span>

install:
  - sudo apt-get update
  <span class="c1"># We do this conditionally because it saves us some downloading if the</span>
  <span class="c1"># version is the same.</span>
  - <span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$TRAVIS_PYTHON_VERSION</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;2.7&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      wget https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh<span class="p">;</span>
    <span class="k">else</span>
      wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh<span class="p">;</span>
    <span class="k">fi</span>
  - bash miniconda.sh -b -p <span class="nv">$HOME</span>/miniconda
  - <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/miniconda/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
  - <span class="nb">hash</span> -r
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  <span class="c1"># Useful for debugging any issues with conda</span>
  - conda info -a

  - conda create -q -n test-environment <span class="nv">python</span><span class="o">=</span><span class="nv">$TRAVIS_PYTHON_VERSION</span> pandas numpy scipy scikit-learn
  - <span class="nb">source</span> activate test-environment
  - python setup.py install
  - pip install pytest

script:
  - py.test


notifications:
  email:
    on_success: never
    on_failure: always
</pre></div>
<br />
Note that you should install pytest manually instead use pre-install one.</p>
<p>However, you can not use tox with conda direct, try ctox <a href="https://github.com/hayd/ctox">https://github.com/hayd/ctox</a>  </p>
<p>2016-03-31 16:19:38</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/how-to-write-reduced-rank-linear-discriminant-analysis-with-python.html#how-to-write-reduced-rank-linear-discriminant-analysis-with-python">How to Write Reduced Rank Linear Discriminant Analysis with Python</a></h2>
    <p>
      Posted on Sat 26 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/machine-learning.html">machine learning</a>,      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>,      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>,      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>    </p>
  </header>
  <div>
      <h2 id="intro"><a name="user-content-intro" href="#intro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Intro</h2>
<p>I'm working on a project named <a href="https://github.com/littlezz/ESL-Model">ESL-Model</a> which I want to use python to implent algorithm from The Elements of Statistical Learning. I start writing RRLDA the day before yesterday,  and I sccuessfully finish until today.  </p>
<p>Notice that I am using Python3.5, which allow me use <code>@</code> instead of <code>np.dot</code>  </p>
<h2 id="the-difference-between-numpy-and-r"><a name="user-content-the-difference-between-numpy-and-r" href="#the-difference-between-numpy-and-r" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>The difference between Numpy and R</h2>
<p>Firstly, Numpy is slight different with R in eigen decomposition(I spent lots of time to find out T_T).  </p>
<p>In R, the eigenvalues return from <code>eigen</code> is descending, which is all notes assume.<br />
But Numpy <code>np.linalg.eigh</code> return eigenvalues in ascending order.  </p>
<p>It is doesn't matter when you work on LDA, because it use both <span class="math">\(V\)</span> and <span class="math">\(D\)</span>, but it influence the result in Reduced rank LDA which you use column of <span class="math">\(V\)</span> alone.  </p>
<p>To slove this problem, you may use <code>np.fliplr</code>.  </p>
<div class="highlight"><pre><span></span><span class="n">W</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.9967</span><span class="p">,</span>  <span class="mf">0.002</span> <span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.002</span> <span class="p">,</span>  <span class="mf">1.0263</span><span class="p">]])</span>

<span class="n">Dw</span><span class="p">,</span> <span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="n">Dw</span> <span class="o">=</span> <span class="n">Dw</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">Uw</span><span class="p">)</span>
</pre></div>


<p>You can get </p>
<div class="highlight"><pre><span></span>print(Dw)
[ 1.02643452  0.99656548]


print(Dw)
[[ 0.06711024 -0.99774557]
 [ 0.99774557  0.06711024]]
</pre></div>


<h2 id="how-to-write-reduced-rank-lda"><a name="user-content-how-to-write-reduced-rank-lda" href="#how-to-write-reduced-rank-lda" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>How to Write Reduced Rank LDA</h2>
<p>Finally, we arrive at the algorithm.<br />
I mainly reference <a href="http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf">http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf</a>. <br />
Which is a very very nice ppt, thanks it very much!  </p>
<ul>
<li>
<p>Find the centroids for all the classes and class prior probabilities, which is the same in LDA (<span class="math">\(\mu_k\)</span> and <span class="math">\(\pi_k\)</span>).  </p>
</li>
<li>
<p>Find between-class covariance matrix B using the centroid vectors and class prior probabilities<br />
    suppose <span class="math">\(\mu_k\)</span> is column vector</p>
<p><span class="math">\(\mu = \Sigma_1^K \mu_k\)</span><br />
<span class="math">\(B =  \Sigma_1^K \pi_k(\mu - \mu_k)(\mu - \mu_k)^T\)</span></p>
<p><strong>Notice that the code dosen't take same shape with formula</strong>  </p>
<div class="highlight"><pre><span></span><span class="n">W</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sigma_hat</span>
<span class="c1"># prior probabilities (K,1)</span>
<span class="n">Pi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pi</span>
<span class="c1"># class centroids (K, p)</span>
<span class="n">Mu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mu</span>
<span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span>
<span class="c1"># the number of class</span>
<span class="n">K</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span>
<span class="c1"># the dimension you want</span>
<span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L</span>

<span class="c1"># Mu is (K,p) matrix, Pi is (K,1)</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Pi</span> <span class="o">*</span> <span class="n">Mu</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">K</span><span class="p">):</span>
    <span class="c1"># vector @ vector equal scalar, use vector[:, None] to transform to matrix</span>
    <span class="c1"># vec[:, None] equal to vec.reshape((1, vec.shape[0]))</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">+</span> <span class="n">Pi</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">*</span><span class="p">((</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="err">@</span> <span class="p">((</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)[</span><span class="bp">None</span><span class="p">,</span> <span class="p">:]))</span>
</pre></div>


</li>
<li>
<p>Find within-class covariance matrix W, the same with <span class="math">\(\hat \Sigma\)</span> in LDA.  </p>
</li>
<li>
<p>eigen decomposition W</p>
<p><span class="math">\(W = V_WD_WV_W^T\)</span><br />
Define <span class="math">\(W^{1/2} = D_W^{1/2}V_W^T\)</span></p>
<p>So <span class="math">\(W^{-\frac{1}{2}} = (W^{1/2})^{-1}\)</span>  </p>
<div class="highlight"><pre><span></span><span class="c1"># Be careful, the `eigh` method get the eigenvalues in ascending , which is opposite to R.</span>
<span class="n">Dw</span><span class="p">,</span> <span class="n">Uw</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="c1"># reverse the Dw_ and Uw</span>
<span class="n">Dw</span> <span class="o">=</span> <span class="n">Dw</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">Uw</span><span class="p">)</span>

<span class="n">W_half</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">pinv</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diagflat</span><span class="p">(</span><span class="n">Dw</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span> <span class="err">@</span> <span class="n">Uw</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>


</li>
<li>
<p>compute <span class="math">\(B^*\)</span><br />
<span class="math">\(B^* = (W^{-\frac{1}{2}})^TBW^{-\frac{1}{2}}\)</span>  </p>
<div class="highlight"><pre><span></span><span class="n">B_star</span> <span class="o">=</span> <span class="n">W_half</span><span class="o">.</span><span class="n">T</span> <span class="err">@</span> <span class="n">B</span> <span class="err">@</span> <span class="n">W_half</span>
</pre></div>


</li>
<li>
<p>eigen decompostion <span class="math">\(B^*\)</span>, get <span class="math">\(a_l\)</span><br />
<span class="math">\(B^* = VDV^T\)</span><br />
<span class="math">\(a_l = W^{-\frac{1}{2}}V_l\)</span></p>
<div class="highlight"><pre><span></span><span class="n">D_</span><span class="p">,</span> <span class="n">V</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">B_star</span><span class="p">)</span>

<span class="c1"># reverse V</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">L</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="n">A</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="n">W_half</span><span class="p">)</span> <span class="err">@</span> <span class="n">V</span><span class="p">[:,</span> <span class="n">l</span><span class="p">]</span>
</pre></div>


</li>
<li>
<p>transform X and <span class="math">\(\mu_k\)</span> and get predict value<br />
<span class="math">\(\hat x = Ax\)</span><br />
<span class="math">\(\hat \mu_k = A\mu_k\)</span></p>
<p>find <span class="math">\(argmin_k {|\hat x- \hat\mu|_2^2 - log(\pi_k)}\)</span></p>
<div class="highlight"><pre><span></span><span class="n">X_star</span> <span class="o">=</span> <span class="n">X</span> <span class="err">@</span> <span class="n">A</span><span class="o">.</span><span class="n">T</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">):</span>
    <span class="c1"># mu_s_star shape is (p,)</span>
    <span class="n">mu_k_star</span> <span class="o">=</span> <span class="n">A</span> <span class="err">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="c1"># Ref: http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html</span>
    <span class="c1"># Ref: http://stackoverflow.com/questions/1401712/how-can-the-euclidean-distance-be-calculated-with-numpy</span>
    <span class="n">Y</span><span class="p">[:,</span> <span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">X_star</span> <span class="o">-</span> <span class="n">mu_k_star</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pi</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="c1"># Python index start from 0, transform to start with 1</span>
<span class="n">y_hat</span> <span class="o">=</span> <span class="n">Y</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>


</li>
</ul>
<h2 id="put-it-together"><a name="user-content-put-it-together" href="#put-it-together" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Put it Together</h2>
<p>You can find complete code in here<br />
<a href="https://github.com/littlezz/ESL-Model/blob/master/esl_model/ch4/model.py">https://github.com/littlezz/ESL-Model/blob/master/esl_model/ch4/model.py</a></p>
<h2 id="reference"><a name="user-content-reference" href="#reference" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Reference</h2>
<ul>
<li>The Elements of Statistical Learning 2nd Edition section 4.3.2 - 4.3.3  </li>
<li><a href="http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf">http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf</a>  </li>
<li><a href="https://onlinecourses.science.psu.edu/stat857/node/83">https://onlinecourses.science.psu.edu/stat857/node/83</a></li>
<li><a href="http://www.stat.cmu.edu/~ryantibs/datamining/lectures/21-clas2-marked.pdf">http://www.stat.cmu.edu/~ryantibs/datamining/lectures/21-clas2-marked.pdf</a></li>
</ul>
<p>2016-03-26 15:43:45</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/fuck-the-reduced-rank-lda.html#fuck-the-reduced-rank-lda">Fuck the Reduced-rank LDA</a></h2>
    <p>
      Posted on Fri 25 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/machine-learning.html">machine learning</a>,      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>,      <a href="http://littlezz.github.io/tag/ta-ma-de.html">他妈的</a>,      <a href="http://littlezz.github.io/tag/xue-xue-xue-xue-ge-pi.html">学学学，学个屁</a>    </p>
  </header>
  <div>
      <p>从昨天开始一直在弄RRLDA， 直到今天晚上， 无果。<br />
搜索各种资料， 各自有理， 到最后连计算 <span class="math">\(W^{-\frac{1}{2}}\)</span> 都能有不同的版本。  </p>
<p>权当整理思路吧， 整理一下各种版本（可能我编程有问题， 反正所有版本我都没能算对：）  </p>
<h2 id="esl"><a name="user-content-esl" href="#esl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>版本一： ESL</h2>
<p>page 114 页的算法。<br />
我翻译一下：  </p>
<ul>
<li>计算 类的重心 K x P 的矩阵M， 还有公共协方差矩阵W；</li>
<li>计算 <span class="math">\(M^* = MW^{-\frac{1}{2}}\)</span>, 使用W的特征分解；</li>
<li>计算<span class="math">\(B^*\)</span>, <span class="math">\(M^*\)</span>的协方差矩阵（B是为了between-class）, 还有他的特征分解 <span class="math">\(B^* = V^*D_BV^{*T}\)</span>. <span class="math">\(V^*\)</span>的按顺序的列<span class="math">\(v_l^*\)</span>定义了最佳子空间的坐标。  </li>
</ul>
<p>卧槽， 我他妈看懂了。<br />
我往下看了一行。 <br />
书上的意思是说， 你本来要算这些jb玩意的， 但是后来有一个叫做『捕鱼者（fisher）』的捕鱼达人， 给出了更吊的东西， 卧槽， 我他妈真的咸鱼啊， 这个人一波收割啊卧槽。  </p>
<p>那我懂了， 我接着看书了。  </p>
<p>FUCK！<br />
FUCK ME！</p>
<p>2016年03月25日00:46:12</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/numpy-shi-yong-xiao-jie.html#numpy-shi-yong-xiao-jie">Numpy 使用小结</a></h2>
    <p>
      Posted on Mon 21 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>,      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p><a href="https://github.com/littlezz/ESL-Model">ESLModel</a> 开发有一段时间了， 期间和numpy打了非常多的交道， 虐得我死去活来。  </p>
<p>于是抽空写一下关于numpy的总结吧。  </p>
<h2 id="intro"><a name="user-content-intro" href="#intro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Intro</h2>
<p>介绍一些会混淆的东西</p>
<h3 id="vector-vs-matrix"><a name="user-content-vector-vs-matrix" href="#vector-vs-matrix" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>vector vs matrix</h3>
<p>vector是向量， 是一维的。 <br />
matrix是二维以上的。  </p>
<div class="highlight"><pre><span></span><span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="c1"># method 1</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">]])</span>

<span class="c1"># method 2</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">vec</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># mathod 3</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="n">vec</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (3,)</span>

<span class="k">print</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (3, 1)</span>
</pre></div>


<ol>
<li>向量可以点乘矩阵， 反过来也可以， 结果是向量。</li>
<li>向量可以点乘向量， 得到标量</li>
<li>向量没有倒置</li>
<li>矩阵使用下标的时候， 结果是向量， 使用slice 来查询的时候， 得到子矩阵。  </li>
</ol>
<p>如果想要得到  单行的子矩阵  </p>
<div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># 得到一行， 矩阵</span>
<span class="n">mat</span><span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span>

<span class="c1"># 得到一列， 矩阵</span>
<span class="n">mat</span><span class="p">[:,[</span><span class="mi">1</span><span class="p">]]</span>

<span class="c1"># 得到第二列， 向量</span>
<span class="n">mat</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>

<span class="c1"># 子矩阵</span>
<span class="n">mat</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># 下标查询</span>
<span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>


<h3 id="axis1-vs-axis0"><a name="user-content-axis1-vs-axis0" href="#axis1-vs-axis0" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>axis=1 vs axis=0</h3>
<p>之前看官方的文档里面有说， 你要这样记：axis=0 是从上往下， axis=1 是从左往右处理。  </p>
<p>比如<code>np.sum(mat, axis=0)</code> 得到每一列从上到下的累加和. <code>axis=1</code> 的时候得到每一行的累加和.  </p>
<div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="n">Out</span><span class="p">[</span><span class="mi">65</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">38</span><span class="p">])</span>
</pre></div>


<h4 id="rowvar1"><a name="user-content-rowvar1" href="#rowvar1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>rowvar=1</h4>
<p>在使用<code>np.cov</code> 的时候，里面有这个参数， 默认是非零， 表示你的矩阵是（p x N）的， 每一行表示变量， 每一列里面存的是样本数据。  如果<code>rowvar=0</code>, 则表示反过来.  </p>
<h2 id="tips"><a name="user-content-tips" href="#tips" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tips</h2>
<h3 id="reshape"><a name="user-content-reshape" href="#reshape" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>reshape</h3>
<p>reshape 里面的值设置-1的时候表示自动</p>
<p><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
<br />
会自动变成(3x4)  </p>
<h3 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何插入一列</h3>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># 在0的开始插入全为3的列</span>
<span class="n">b1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<h3 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何把向量转成单列矩阵</h3>
<div class="highlight"><pre><span></span><span class="c1"># column matrix</span>
<span class="n">vec</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span>

<span class="c1"># row matrix</span>
<span class="n">vec</span><span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>


<h3 id="a"><a name="user-content-a" href="#a" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何算矩阵的行列式<span class="math">\(|A|\)</span></h3>
<p>用<code>np.linalg.det</code> 或者 <code>np.linalg.slogdet</code><br />
后者在矩阵里面的值很小的时候使用, 得到的是log后的结果.</p>
<h3 id="ddof"><a name="user-content-ddof" href="#ddof" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ddof</h3>
<p>在<code>np.std</code>等函数中有<code>ddof</code>这个参数， 默认为0， 在pandas里面默认为1， 主要用于控制比如计算标准差的时候， 是除以N-1还是除以N， 这里相当于除以（N - ddof）</p>
<h3 id="svd"><a name="user-content-svd" href="#svd" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>svd</h3>
<p><div class="highlight"><pre><span></span><span class="n">U</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">Vt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">Vt</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output(4, 4) (3,) (3, 3) (4, 3)</span>

<span class="c1"># with full_matrices=False</span>
<span class="n">U</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">Vt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">full_matrices</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">Vt</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (4, 3) (3,) (3, 3) (4, 3)</span>
</pre></div>
<br />
注意到D是向量， Vt是V的转置矩阵。<br />
多数情况下， 应该是使用full_matrices=False</p>
<h3 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>随机整数矩阵</h3>
<div class="highlight"><pre><span></span><span class="c1"># 随机生成包含0-9的 4x3 的矩阵</span>
<span class="n">d</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>


<h3 id="orthogonal-matrix"><a name="user-content-orthogonal-matrix" href="#orthogonal-matrix" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>随机生成正交矩阵（orthogonal matrix）</h3>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_orthogonal_matrix</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    with random permutation of coordinate axes</span>
<span class="sd">    :param N: dimension of matrix</span>
<span class="sd">    :return: NxN orthogonal matrix contains 0 and 1</span>

<span class="sd">    Ref: http://stackoverflow.com/questions/33003341/how-to-randomly-generate-a-nonnegative-orthogonal-matrix-in-numpy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">I</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
</pre></div>


<h3 id="eigen-decomposition"><a name="user-content-eigen-decomposition" href="#eigen-decomposition" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>特征分解（eigen decomposition）</h3>
<p><code>np.eigh</code> 针对对称的矩阵， <strong>注意， eigenvalues 是升序的，而在R语言里面是降序的！</strong><br />
<code>np.eig</code> 普通的分解， eigenvalues不保证顺序。  </p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/python-package-setup.html#python-package-setup">Python Package Setup</a></h2>
    <p>
      Posted on Thu 17 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p>esl_model <a href="https://github.com/littlezz/ESL-Model">https://github.com/littlezz/ESL-Model</a><br />
今天算是弄完了第三章的代码， 放到github上面， 折腾python的打包折腾了大半天。  </p>
<p>简单总结一下Python的Package Distribution吧。<br />
有空的话， 在写一个pytest的简单总结。</p>
<h2 id="setuppy"><a name="user-content-setuppy" href="#setuppy" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>setup.py</h2>
<p>setup.py 是最主要的整个配置的文件， </p>
<p>贴我的setup.py 的代码好了。  </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.rst&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">readme</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">version</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="s1">&#39;esl_model&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">__version__</span>


<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;esl_model&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
      <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Algorithm from The Elements of Statistical Learning book implement by Python code&quot;</span><span class="p">,</span>
      <span class="n">long_description</span><span class="o">=</span><span class="n">readme</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.5&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3 :: Only&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Development Status :: 2 - Pre-Alpha&#39;</span><span class="p">,</span>
          <span class="s1">&#39;License :: OSI Approved :: MIT License&#39;</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://github.com/littlezz/ESL-Model&#39;</span><span class="p">,</span>
      <span class="n">author</span><span class="o">=</span><span class="s1">&#39;littlezz&#39;</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;zz.at.field@gmail.com&#39;</span><span class="p">,</span>
      <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tests*&#39;</span><span class="p">]),</span>
      <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;numpy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;pandas&#39;</span><span class="p">,</span>
            <span class="s1">&#39;scipy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sklearn&#39;</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="n">tests_require</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pytest&#39;</span><span class="p">],</span>
      <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">zip_safe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p>逐个解释参数。<br />
<code>name</code> 是你要发布的模块的名字, 只能是用小写和下划线.不要和其他的公共的模块名字冲突.  </p>
<p><code>version</code> 是版本号, 诸如 0.0.1 这样.  </p>
<p><code>description</code> 和 <code>long_description</code>是你这个项目的介绍，用于pipy上面的介绍，注意 long_description 只能使用rst格式， **不支持**markdown。   </p>
<p><code>classifiers</code>是你在pipy上面的分类， 一般在这里要只能你是否支持py2， 或py3， 或者是否有特定的平台限制。<a href="https://pypi.python.org/pypi?%3Aaction=list_classifiers">所有classifiers 列表</a>  </p>
<p><code>packages</code>, 要包含的代码的文件夹。比如我也可以设置成 <code>esl_model</code>， 但是据我观察， 这样设置之后， 我下面的子模块是没有办法使用<code>import esl_model.ch3</code> 这样载入的。<br />
所以使用find_packages自动寻找所有模块， 特别排除我的测试文件存放的文件夹。  </p>
<p><code>install_requires</code>, 依赖， 如果在虚拟环境里面的话可以用<code>pip freeze</code>来查看安装的库， 但是这里面会包含真正用到的库（比如里面可能会显示ipython）。 可以使用 pipreqs 这个库。  </p>
<p><code>tests_require</code> 这个是测试的用的, 在<code>python setup.py test</code>的时候用到, 然而我偷懒了, pytest在这里还差一步配置， 所以这里有没有都一样。。  </p>
<p><code>include_package_data</code>, 这个是包含非python代码的文件， 我的程序里面要使用到csv数据， 所以需要这个选项。  </p>
<p>我的代码结构树</p>
<div class="highlight"><pre><span></span>── LICENSE.md
├── MANIFEST.in
├── README.rst
├── esl_model
│   ├── __init__.py
│   ├── __pycache__
│   ├── base.py
│   ├── ch3
│   │   ├── __init__.py
│   │   ├── __pycache__
│   │   └── model.py
│   ├── datasets
│   │   ├── __init__.py
│   │   ├── __pycache__
│   │   ├── base.py
│   │   └── data
│   │       └── prostate.csv
│   └── utils.py
├── pytest.ini
├── setup.py
└── tests
    ├── __init__.py
    ├── __pycache__
    ├── test_ch3.py
    └── utils.py
</pre></div>


<h2 id="manifestin"><a name="user-content-manifestin" href="#manifestin" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>MANIFEST.in</h2>
<p>指定需要包含的非程序文件  </p>
<p>一般是<code>include README.rst</code> <br />
我这里因为有额外的数据， 所以要多一行。  </p>
<div class="highlight"><pre><span></span>include README.rst
recursive-include esl_model/datasets/data *.csv
</pre></div>


<p>recursive-include 必须， 不然数据不包含。  </p>
<h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>测试安装</h2>
<p><code>pip install -e .</code><br />
本地的调试安装模式。  </p>
<h2 id="ref"><a name="user-content-ref" href="#ref" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ref</h2>
<ul>
<li>sklearn的配置文件 <a href="https://github.com/scikit-learn/scikit-learn">https://github.com/scikit-learn/scikit-learn</a>  </li>
<li>Python-packaging <a href="https://python-packaging.readthedocs.org/en/latest/testing.html">https://python-packaging.readthedocs.org/en/latest/testing.html</a></li>
</ul>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/a-fa-gou-shao-nian-yi-ji-jin-yong.html#a-fa-gou-shao-nian-yi-ji-jin-yong">阿发狗，少年以及金庸</a></h2>
    <p>
      Posted on Tue 15 March 2016 in <a href="http://littlezz.github.io/category/diary.html">diary</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>,      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>    </p>
  </header>
  <div>
      <p>阿发狗3：0打赢了李世石， 整个世界沉浸在一股人工智能毁灭人类的狂欢中， 之后李世石翻了一盘。 众人笑道：AI已经学会放水啦， 药丸药丸， 真是可怕。  </p>
<p>时至围棋界被阿发狗颠覆之际， 世界围棋第一人站了出来：就算阿发狗能打败李世石， 也打败不了我！大家定睛一看， 发现围棋第一人是个19岁少年， 于是纷纷以长辈自称， 要教他一下如何做人谦虚的人生道理。  </p>
<p>围棋大师吴清源的脑残粉金庸同学3月10日九十二岁啦， 大家有什么想对他说的， 截止2016年03月16日00:44:36， 这个问题下面排名第一的答案写了一个小故事， 大意是金庸因为写了一篇暗讽教务主任的文章被其看到后居然就被退学了， 之后金庸都不提这段高中历史， 作者给于这件事情的评价是， 『傲娇』得很的金庸。末尾不忘用一个感叹号来增强语气。  </p>
<p>我想起了周杰伦在《三年二班》里面唱到那句重复了好多遍的歌词  </p>
<p>——  </p>
<blockquote>
<p>不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 </p>
</blockquote>
<p>这三件事情， 一点也不好笑。  </p>
<p>如果你也曾在出发时志在必得， 结果却被打得落花流水， 咬紧牙关取得一些成绩却于事无补。  </p>
<p>如果你也曾在同辈愉快玩耍的时候承受超越『年龄段』的磨练， 以此获得相应的能力， 却还是要被年长而无能者打着人生经验丰富的旗号『教育』一番。  </p>
<p>如果你也曾空怀与学校教学目标不相符的能力， 而濒临退学， 抑或被直接退学。  </p>
<p>那么， 你就会知道， 一点也不好笑。  </p>
<p></br></p>
<p>三面的三件事， 其实都可以围绕围棋展开， 第一件事李世石困兽之斗， 基本上线上和线下的人都开玩笑说是AI放水， 对之前不可一世的李世石同学的嘲讽程度可见一斑。<br />
第二件事是19岁少年的『惊人』发言， 于是大家想要教他当大人。</p>
<p>然而这些举动其实在我们的吴清源大师面前， 其实都是小儿科。<br />
不过， 大家也不关心吴清源是谁是不是？  </p>
<p>算了， 本来我还有半肚子的苦水没有得喷出来， 写到这里的时候也没有什么想说的了， 以前老是奇怪， 你说那些动物长得都一样的， 他们怎么分得清楚谁是谁？  </p>
<p>我们分不清，但是他们分得清啊。 现在想来网络上也是一样的。<br />
隔着屏幕， 谁知道后面码字的谁是谁， 在这里被恶心完之后， 接着被下一个地方恶心， 我们总用一个『傻x』来标记他们， 结果发现这个世界上怎么这么多『傻x』， 然而仔细一想， 这个词后面是无数的人， 你干掉了一个， 又冒出一个，无穷尽，辩不赢， 赢不长久， 赢了也没用。最后哪怕是呕心沥血的赢了一次，花了时间和精力， 最后得到对面甘拜下风， 低头认输， 五体投地，结果过了不久又冒出一个。  </p>
<p>所以当我发现我要写一些幼稚得不行的所谓的人生道理的时候， 我及时的把自己打住了。  </p>
<p>有非常多的话要说， 但是在写作的时候， 我已经在自己的内心里面说了一遍， 这就够了。  </p>
<p>如果有过一些相似的经历， 那么有些话是不必多说的， 如果没有过切身体会， 那么又何必多说？  </p>
<p>2016年03月16日01:58:35  </p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/linear-modelde-zong-jie.html#linear-modelde-zong-jie">Linear Model的总结</a></h2>
    <p>
      Posted on Thu 10 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>    </p>
  </header>
  <div>
      <h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>目录</h2>
<ul>
<li>公式</li>
<li>易混淆的名词解释</li>
<li>蛋疼的程序编写过程  </li>
</ul>
<h3 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>公式</h3>
<p>The elements of statistical learning 看到了第三章， 昨天着手于编写程序。  </p>
<p>Linear Model: </p>
<p><span class="math">\(\hat\beta = (\mathbf X^T \mathbf X)^{-1} \mathbf X^T \mathbf y\)</span></p>
<p>在这里面， <span class="math">\(\mathbf X\)</span> 先要要standardization, 然后在第一列插入全为1的列， 用于截距计算(intercept)。<br />
所以beta hat 算出来后第一项为截距。  </p>
<p><span class="math">\(\hat {\mathbf y} = \mathbf X \hat \beta\)</span> </p>
<p>对数据做预测的时候， <strong>X也要standardization</strong>， 做和你之前一样的事情， 使用和**train set一样的 mean 和 std**， 说多了都是泪啊， 我昨天晚上一个晚上都在弄这个， 因为我的要预测的x用了自己的mean 和std， 结果出来的结果不一样。  一定要使用相同的std 和mean 来处理数据。 我才想起来ng的课里面写程序的时候， pdf里面还特别提示过， 妈的， 哭晕。  </p>
<p><span class="math">\(var(\hat\beta)=(\mathbf X^T \mathbf X)^{-1}\sigma^2\)</span>  </p>
<p><span class="math">\(\hat \sigma = \frac{1}{N-p-1} \sum_{i=1}^N(y_i - \hat y_i)^2\)</span></p>
<p>然后是z-score<br />
<span class="math">\(z_j = \frac{\hat\beta_j}{\hat \sigma \sqrt v_j}\)</span></p>
<p>注意到<span class="math">\(v_j\)</span>是<span class="math">\(\mathbf X^T \mathbf X\)</span>的对角线上的第j项。<br />
所以得到stand error这里的做法是对<span class="math">\(var(\hat\beta)\)</span>对角线开平方。</p>
<p>F statistic  </p>
<p><span class="math">\(F = \frac{(RSS_0 - RSS_1)/(p_1 - p_0)}{RSS1 / (N - p_1 - 1)}\)</span></p>
<p>F statistic 用于分析去掉一些feature之后影响大不大。<br />
<span class="math">\(RSS_1\)</span> 是含有跟多feature的模型的代价， <span class="math">\(RSS_0\)</span>是去掉一些feature之后的模型的代价。  </p>
<h3 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>易混淆的名词解释</h3>
<h5 id="standardization"><a name="user-content-standardization" href="#standardization" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>standardization</h5>
<p>这个的意识是让数据的feature 的平均值为0, 然后高斯分布为1.  </p>
<p>针对的是每一个feature, 一般是<code>x = (x-x.mean(axis=0)) / x.std(asix=0, ddof=1)</code></p>
<p>默认ddof=0， 这个时候标准差（std） 是除以N的， 在机器学习里面， 一般是除以N， 但是在这本书里面， 一般是认为std的计算要除以（N-1）。  </p>
<h5 id="normalize"><a name="user-content-normalize" href="#normalize" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>normalize</h5>
<p>这个是针对每一个样例的， 比如X里面包含N组数据， 那么就是对N组数据做， 一般是把不同特征的取值范围降到同一个范围里面。  </p>
<h3 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>蛋疼的程序编写过程</h3>
<p>我花了一天， 才发现， standardization对结果是不会影响的， 是一种优化方法。<br />
但是我因为对 Test_X 的数据standardization错了, 所以结果总是不一样. 非常的尴尬.  </p>
<p>翻了sklearn的源码, 发现他里面怎么对y做了处理, 做了<code>(y-y.mean())</code>东西， 卧槽， 不合理啊。  </p>
<p>昨天写了一天， 值写了linear Regression， 后面还有一堆， 慢慢写吧。  </p>
<p>等稳定一些之后再放到github上面好了。  </p>
<p>2016年03月10日15:12:10</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
</article>

  <div class="pagination">
    <a class="btn" href="http://littlezz.github.io/index2.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
  </div>

    <footer>
        <p>&copy; littlezz 2015</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " littlezz's Blog ",
  "url" : "http://littlezz.github.io",
  "image": "/images/logo.jpg",
  "description": "littlezz's Thoughts and Writings About Python And Machine Learning and diary"
}
</script></body>
</html>