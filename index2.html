<!DOCTYPE html>
<html lang="en">
<head>
  <!-- <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'> -->
   <link href='//fonts.proxy.ustclug.org/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://littlezz.github.io/theme/css/font-awesome.min.css">
  <link href="http://littlezz.github.io/static/custom.css" rel="stylesheet">
  <link href="http://littlezz.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="littlezz's Blog Atom">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />
  <meta name="author" content="littlezz" />
  <meta name="description" content="littlezz's Thoughts and Writings About Python And Machine Learning and diary" />
<meta property="og:site_name" content="littlezz's Blog"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="littlezz's Blog"/>
<meta property="og:description" content="littlezz's Thoughts and Writings About Python And Machine Learning and diary"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://littlezz.github.io"/>
<meta property="og:image" content="/images/logo.jpg">
  <title>littlezz's Blog</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://littlezz.github.io">
        <img src="/images/logo.jpg" alt="littlezz" title="littlezz">
      </a>
      <h1><a href="http://littlezz.github.io">littlezz</a></h1>
      <p>Everything that has a beginning has an end.</p>
      <nav>
        <ul class="list">
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-github" href="https://github.com/littlezz/" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://littlezz.github.io">Home</a>
      <a href="/categories">Category</a>
      <a href="/tags">Tags</a>
      <a href="http://littlezz.github.io/feeds/all.atom.xml">Atom</a>
    </nav>

<article>
  <header>
    <h2><a href="http://littlezz.github.io/travis-ci-with-numpy-and-pytest.html#travis-ci-with-numpy-and-pytest">Travis CI with Numpy and Pytest</a></h2>
    <p>
      Posted on Thu 31 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p>It takes long time to install scientific python package by <code>pip</code> in travis and sometime fail.  </p>
<p>The solve is to use conda to install binary package. <br />
<a href="http://conda.pydata.org/docs/travis.html">http://conda.pydata.org/docs/travis.html</a>  </p>
<p>Note that some package not in conda, you can use <code>pip</code> install it, for example, <code>py.test</code>  </p>
<p>Here is my <a href="https://github.com/littlezz/ESL-Model">ESL-Model</a> .trais.yml, you can view on github <a href="https://github.com/littlezz/ESL-Model/blob/master/.travis.yml">https://github.com/littlezz/ESL-Model/blob/master/.travis.yml</a>  </p>
<p><div class="highlight"><pre><span></span>language: python
python:
  <span class="c1"># We don&#39;t actually use the Travis Python, but this keeps it organized.</span>
  - <span class="s2">&quot;3.5&quot;</span>

install:
  - sudo apt-get update
  <span class="c1"># We do this conditionally because it saves us some downloading if the</span>
  <span class="c1"># version is the same.</span>
  - <span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$TRAVIS_PYTHON_VERSION</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;2.7&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      wget https://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh<span class="p">;</span>
    <span class="k">else</span>
      wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh<span class="p">;</span>
    <span class="k">fi</span>
  - bash miniconda.sh -b -p <span class="nv">$HOME</span>/miniconda
  - <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/miniconda/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
  - <span class="nb">hash</span> -r
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  <span class="c1"># Useful for debugging any issues with conda</span>
  - conda info -a

  - conda create -q -n test-environment <span class="nv">python</span><span class="o">=</span><span class="nv">$TRAVIS_PYTHON_VERSION</span> pandas numpy scipy scikit-learn
  - <span class="nb">source</span> activate test-environment
  - python setup.py install
  - pip install pytest

script:
  - py.test


notifications:
  email:
    on_success: never
    on_failure: always
</pre></div>
<br />
Note that you should install pytest manually instead use pre-install one.</p>
<p>However, you can not use tox with conda direct, try ctox <a href="https://github.com/hayd/ctox">https://github.com/hayd/ctox</a>  </p>
<p>2016-03-31 16:19:38</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/how-to-write-reduced-rank-linear-discriminant-analysis-with-python.html#how-to-write-reduced-rank-linear-discriminant-analysis-with-python">How to Write Reduced Rank Linear Discriminant Analysis with Python</a></h2>
    <p>
      Posted on Sat 26 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/machine-learning.html">machine learning</a>,      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>,      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>,      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>    </p>
  </header>
  <div>
      <h2 id="intro"><a name="user-content-intro" href="#intro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Intro</h2>
<p>I'm working on a project named <a href="https://github.com/littlezz/ESL-Model">ESL-Model</a> which I want to use python to implent algorithm from The Elements of Statistical Learning. I start writing RRLDA the day before yesterday,  and I sccuessfully finish until today.  </p>
<p>Notice that I am using Python3.5, which allow me use <code>@</code> instead of <code>np.dot</code>  </p>
<h2 id="the-difference-between-numpy-and-r"><a name="user-content-the-difference-between-numpy-and-r" href="#the-difference-between-numpy-and-r" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>The difference between Numpy and R</h2>
<p>Firstly, Numpy is slight different with R in eigen decomposition(I spent lots of time to find out T_T).  </p>
<p>In R, the eigenvalues return from <code>eigen</code> is descending, which is all notes assume.<br />
But Numpy <code>np.linalg.eigh</code> return eigenvalues in ascending order.  </p>
<p>It is doesn't matter when you work on LDA, because it use both <span class="math">\(V\)</span> and <span class="math">\(D\)</span>, but it influence the result in Reduced rank LDA which you use column of <span class="math">\(V\)</span> alone.  </p>
<p>To slove this problem, you may use <code>np.fliplr</code>.  </p>
<div class="highlight"><pre><span></span><span class="n">W</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.9967</span><span class="p">,</span>  <span class="mf">0.002</span> <span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.002</span> <span class="p">,</span>  <span class="mf">1.0263</span><span class="p">]])</span>

<span class="n">Dw</span><span class="p">,</span> <span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="n">Dw</span> <span class="o">=</span> <span class="n">Dw</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">Uw</span><span class="p">)</span>
</pre></div>


<p>You can get </p>
<div class="highlight"><pre><span></span>print(Dw)
[ 1.02643452  0.99656548]


print(Dw)
[[ 0.06711024 -0.99774557]
 [ 0.99774557  0.06711024]]
</pre></div>


<h2 id="how-to-write-reduced-rank-lda"><a name="user-content-how-to-write-reduced-rank-lda" href="#how-to-write-reduced-rank-lda" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>How to Write Reduced Rank LDA</h2>
<p>Finally, we arrive at the algorithm.<br />
I mainly reference <a href="http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf">http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf</a>. <br />
Which is a very very nice ppt, thanks it very much!  </p>
<ul>
<li>
<p>Find the centroids for all the classes and class prior probabilities, which is the same in LDA (<span class="math">\(\mu_k\)</span> and <span class="math">\(\pi_k\)</span>).  </p>
</li>
<li>
<p>Find between-class covariance matrix B using the centroid vectors and class prior probabilities<br />
    suppose <span class="math">\(\mu_k\)</span> is column vector</p>
<p><span class="math">\(\mu = \Sigma_1^K \mu_k\)</span><br />
<span class="math">\(B =  \Sigma_1^K \pi_k(\mu - \mu_k)(\mu - \mu_k)^T\)</span></p>
<p><strong>Notice that the code dosen't take same shape with formula</strong>  </p>
<div class="highlight"><pre><span></span><span class="n">W</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Sigma_hat</span>
<span class="c1"># prior probabilities (K,1)</span>
<span class="n">Pi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pi</span>
<span class="c1"># class centroids (K, p)</span>
<span class="n">Mu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mu</span>
<span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span>
<span class="c1"># the number of class</span>
<span class="n">K</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span>
<span class="c1"># the dimension you want</span>
<span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L</span>

<span class="c1"># Mu is (K,p) matrix, Pi is (K,1)</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Pi</span> <span class="o">*</span> <span class="n">Mu</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">K</span><span class="p">):</span>
    <span class="c1"># vector @ vector equal scalar, use vector[:, None] to transform to matrix</span>
    <span class="c1"># vec[:, None] equal to vec.reshape((1, vec.shape[0]))</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">+</span> <span class="n">Pi</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">*</span><span class="p">((</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)[:,</span> <span class="bp">None</span><span class="p">]</span> <span class="err">@</span> <span class="p">((</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)[</span><span class="bp">None</span><span class="p">,</span> <span class="p">:]))</span>
</pre></div>


</li>
<li>
<p>Find within-class covariance matrix W, the same with <span class="math">\(\hat \Sigma\)</span> in LDA.  </p>
</li>
<li>
<p>eigen decomposition W</p>
<p><span class="math">\(W = V_WD_WV_W^T\)</span><br />
Define <span class="math">\(W^{1/2} = D_W^{1/2}V_W^T\)</span></p>
<p>So <span class="math">\(W^{-\frac{1}{2}} = (W^{1/2})^{-1}\)</span>  </p>
<div class="highlight"><pre><span></span><span class="c1"># Be careful, the `eigh` method get the eigenvalues in ascending , which is opposite to R.</span>
<span class="n">Dw</span><span class="p">,</span> <span class="n">Uw</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
<span class="c1"># reverse the Dw_ and Uw</span>
<span class="n">Dw</span> <span class="o">=</span> <span class="n">Dw</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Uw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">Uw</span><span class="p">)</span>

<span class="n">W_half</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">pinv</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diagflat</span><span class="p">(</span><span class="n">Dw</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span> <span class="err">@</span> <span class="n">Uw</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>


</li>
<li>
<p>compute <span class="math">\(B^*\)</span><br />
<span class="math">\(B^* = (W^{-\frac{1}{2}})^TBW^{-\frac{1}{2}}\)</span>  </p>
<div class="highlight"><pre><span></span><span class="n">B_star</span> <span class="o">=</span> <span class="n">W_half</span><span class="o">.</span><span class="n">T</span> <span class="err">@</span> <span class="n">B</span> <span class="err">@</span> <span class="n">W_half</span>
</pre></div>


</li>
<li>
<p>eigen decompostion <span class="math">\(B^*\)</span>, get <span class="math">\(a_l\)</span><br />
<span class="math">\(B^* = VDV^T\)</span><br />
<span class="math">\(a_l = W^{-\frac{1}{2}}V_l\)</span></p>
<div class="highlight"><pre><span></span><span class="n">D_</span><span class="p">,</span> <span class="n">V</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">eigh</span><span class="p">(</span><span class="n">B_star</span><span class="p">)</span>

<span class="c1"># reverse V</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fliplr</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">L</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">L</span><span class="p">):</span>
    <span class="n">A</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="n">W_half</span><span class="p">)</span> <span class="err">@</span> <span class="n">V</span><span class="p">[:,</span> <span class="n">l</span><span class="p">]</span>
</pre></div>


</li>
<li>
<p>transform X and <span class="math">\(\mu_k\)</span> and get predict value<br />
<span class="math">\(\hat x = Ax\)</span><br />
<span class="math">\(\hat \mu_k = A\mu_k\)</span></p>
<p>find <span class="math">\(argmin_k {|\hat x- \hat\mu|_2^2 - log(\pi_k)}\)</span></p>
<div class="highlight"><pre><span></span><span class="n">X_star</span> <span class="o">=</span> <span class="n">X</span> <span class="err">@</span> <span class="n">A</span><span class="o">.</span><span class="n">T</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">):</span>
    <span class="c1"># mu_s_star shape is (p,)</span>
    <span class="n">mu_k_star</span> <span class="o">=</span> <span class="n">A</span> <span class="err">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="c1"># Ref: http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html</span>
    <span class="c1"># Ref: http://stackoverflow.com/questions/1401712/how-can-the-euclidean-distance-be-calculated-with-numpy</span>
    <span class="n">Y</span><span class="p">[:,</span> <span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">LA</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">X_star</span> <span class="o">-</span> <span class="n">mu_k_star</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pi</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="c1"># Python index start from 0, transform to start with 1</span>
<span class="n">y_hat</span> <span class="o">=</span> <span class="n">Y</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>


</li>
</ul>
<h2 id="put-it-together"><a name="user-content-put-it-together" href="#put-it-together" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Put it Together</h2>
<p>You can find complete code in here<br />
<a href="https://github.com/littlezz/ESL-Model/blob/master/esl_model/ch4/model.py">https://github.com/littlezz/ESL-Model/blob/master/esl_model/ch4/model.py</a></p>
<h2 id="reference"><a name="user-content-reference" href="#reference" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Reference</h2>
<ul>
<li>The Elements of Statistical Learning 2nd Edition section 4.3.2 - 4.3.3  </li>
<li><a href="http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf">http://sites.stat.psu.edu/~jiali/course/stat597e/notes2/lda2.pdf</a>  </li>
<li><a href="https://onlinecourses.science.psu.edu/stat857/node/83">https://onlinecourses.science.psu.edu/stat857/node/83</a></li>
<li><a href="http://www.stat.cmu.edu/~ryantibs/datamining/lectures/21-clas2-marked.pdf">http://www.stat.cmu.edu/~ryantibs/datamining/lectures/21-clas2-marked.pdf</a></li>
</ul>
<p>2016-03-26 15:43:45</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/fuck-the-reduced-rank-lda.html#fuck-the-reduced-rank-lda">Fuck the Reduced-rank LDA</a></h2>
    <p>
      Posted on Fri 25 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/machine-learning.html">machine learning</a>,      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>,      <a href="http://littlezz.github.io/tag/ta-ma-de.html">他妈的</a>,      <a href="http://littlezz.github.io/tag/xue-xue-xue-xue-ge-pi.html">学学学，学个屁</a>    </p>
  </header>
  <div>
      <p>从昨天开始一直在弄RRLDA， 直到今天晚上， 无果。<br />
搜索各种资料， 各自有理， 到最后连计算 <span class="math">\(W^{-\frac{1}{2}}\)</span> 都能有不同的版本。  </p>
<p>权当整理思路吧， 整理一下各种版本（可能我编程有问题， 反正所有版本我都没能算对：）  </p>
<h2 id="esl"><a name="user-content-esl" href="#esl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>版本一： ESL</h2>
<p>page 114 页的算法。<br />
我翻译一下：  </p>
<ul>
<li>计算 类的重心 K x P 的矩阵M， 还有公共协方差矩阵W；</li>
<li>计算 <span class="math">\(M^* = MW^{-\frac{1}{2}}\)</span>, 使用W的特征分解；</li>
<li>计算<span class="math">\(B^*\)</span>, <span class="math">\(M^*\)</span>的协方差矩阵（B是为了between-class）, 还有他的特征分解 <span class="math">\(B^* = V^*D_BV^{*T}\)</span>. <span class="math">\(V^*\)</span>的按顺序的列<span class="math">\(v_l^*\)</span>定义了最佳子空间的坐标。  </li>
</ul>
<p>卧槽， 我他妈看懂了。<br />
我往下看了一行。 <br />
书上的意思是说， 你本来要算这些jb玩意的， 但是后来有一个叫做『捕鱼者（fisher）』的捕鱼达人， 给出了更吊的东西， 卧槽， 我他妈真的咸鱼啊， 这个人一波收割啊卧槽。  </p>
<p>那我懂了， 我接着看书了。  </p>
<p>FUCK！<br />
FUCK ME！</p>
<p>2016年03月25日00:46:12</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/numpy-shi-yong-xiao-jie.html#numpy-shi-yong-xiao-jie">Numpy 使用小结</a></h2>
    <p>
      Posted on Mon 21 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/numpy.html">numpy</a>,      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p><a href="https://github.com/littlezz/ESL-Model">ESLModel</a> 开发有一段时间了， 期间和numpy打了非常多的交道， 虐得我死去活来。  </p>
<p>于是抽空写一下关于numpy的总结吧。  </p>
<h2 id="intro"><a name="user-content-intro" href="#intro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Intro</h2>
<p>介绍一些会混淆的东西</p>
<h3 id="vector-vs-matrix"><a name="user-content-vector-vs-matrix" href="#vector-vs-matrix" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>vector vs matrix</h3>
<p>vector是向量， 是一维的。 <br />
matrix是二维以上的。  </p>
<div class="highlight"><pre><span></span><span class="n">vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="c1"># method 1</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">]])</span>

<span class="c1"># method 2</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">vec</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># mathod 3</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="n">vec</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (3,)</span>

<span class="k">print</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (3, 1)</span>
</pre></div>


<ol>
<li>向量可以点乘矩阵， 反过来也可以， 结果是向量。</li>
<li>向量可以点乘向量， 得到标量</li>
<li>向量没有倒置</li>
<li>矩阵使用下标的时候， 结果是向量， 使用slice 来查询的时候， 得到子矩阵。  </li>
</ol>
<p>如果想要得到  单行的子矩阵  </p>
<div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># 得到一行， 矩阵</span>
<span class="n">mat</span><span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="p">:]</span>

<span class="c1"># 得到一列， 矩阵</span>
<span class="n">mat</span><span class="p">[:,[</span><span class="mi">1</span><span class="p">]]</span>

<span class="c1"># 得到第二列， 向量</span>
<span class="n">mat</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>

<span class="c1"># 子矩阵</span>
<span class="n">mat</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># 下标查询</span>
<span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>


<h3 id="axis1-vs-axis0"><a name="user-content-axis1-vs-axis0" href="#axis1-vs-axis0" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>axis=1 vs axis=0</h3>
<p>之前看官方的文档里面有说， 你要这样记：axis=0 是从上往下， axis=1 是从左往右处理。  </p>
<p>比如<code>np.sum(mat, axis=0)</code> 得到每一列从上到下的累加和. <code>axis=1</code> 的时候得到每一行的累加和.  </p>
<div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">m2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="n">Out</span><span class="p">[</span><span class="mi">65</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">38</span><span class="p">])</span>
</pre></div>


<h4 id="rowvar1"><a name="user-content-rowvar1" href="#rowvar1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>rowvar=1</h4>
<p>在使用<code>np.cov</code> 的时候，里面有这个参数， 默认是非零， 表示你的矩阵是（p x N）的， 每一行表示变量， 每一列里面存的是样本数据。  如果<code>rowvar=0</code>, 则表示反过来.  </p>
<h2 id="tips"><a name="user-content-tips" href="#tips" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tips</h2>
<h3 id="reshape"><a name="user-content-reshape" href="#reshape" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>reshape</h3>
<p>reshape 里面的值设置-1的时候表示自动</p>
<p><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
<br />
会自动变成(3x4)  </p>
<h3 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何插入一列</h3>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="c1"># 在0的开始插入全为3的列</span>
<span class="n">b1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<h3 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何把向量转成单列矩阵</h3>
<div class="highlight"><pre><span></span><span class="c1"># column matrix</span>
<span class="n">vec</span><span class="p">[:,</span> <span class="bp">None</span><span class="p">]</span>

<span class="c1"># row matrix</span>
<span class="n">vec</span><span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>


<h3 id="a"><a name="user-content-a" href="#a" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>如何算矩阵的行列式<span class="math">\(|A|\)</span></h3>
<p>用<code>np.linalg.det</code> 或者 <code>np.linalg.slogdet</code><br />
后者在矩阵里面的值很小的时候使用, 得到的是log后的结果.</p>
<h3 id="ddof"><a name="user-content-ddof" href="#ddof" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ddof</h3>
<p>在<code>np.std</code>等函数中有<code>ddof</code>这个参数， 默认为0， 在pandas里面默认为1， 主要用于控制比如计算标准差的时候， 是除以N-1还是除以N， 这里相当于除以（N - ddof）</p>
<h3 id="svd"><a name="user-content-svd" href="#svd" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>svd</h3>
<p><div class="highlight"><pre><span></span><span class="n">U</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">Vt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">Vt</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output(4, 4) (3,) (3, 3) (4, 3)</span>

<span class="c1"># with full_matrices=False</span>
<span class="n">U</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">Vt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">full_matrices</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">D</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">Vt</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># output (4, 3) (3,) (3, 3) (4, 3)</span>
</pre></div>
<br />
注意到D是向量， Vt是V的转置矩阵。<br />
多数情况下， 应该是使用full_matrices=False</p>
<h3 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>随机整数矩阵</h3>
<div class="highlight"><pre><span></span><span class="c1"># 随机生成包含0-9的 4x3 的矩阵</span>
<span class="n">d</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>


<h3 id="orthogonal-matrix"><a name="user-content-orthogonal-matrix" href="#orthogonal-matrix" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>随机生成正交矩阵（orthogonal matrix）</h3>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_orthogonal_matrix</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    with random permutation of coordinate axes</span>
<span class="sd">    :param N: dimension of matrix</span>
<span class="sd">    :return: NxN orthogonal matrix contains 0 and 1</span>

<span class="sd">    Ref: http://stackoverflow.com/questions/33003341/how-to-randomly-generate-a-nonnegative-orthogonal-matrix-in-numpy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">I</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
</pre></div>


<h3 id="eigen-decomposition"><a name="user-content-eigen-decomposition" href="#eigen-decomposition" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>特征分解（eigen decomposition）</h3>
<p><code>np.eigh</code> 针对对称的矩阵， <strong>注意， eigenvalues 是升序的，而在R语言里面是降序的！</strong><br />
<code>np.eig</code> 普通的分解， eigenvalues不保证顺序。  </p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/python-package-setup.html#python-package-setup">Python Package Setup</a></h2>
    <p>
      Posted on Thu 17 March 2016 in <a href="http://littlezz.github.io/category/python.html">Python</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/python.html">python</a>,      <a href="http://littlezz.github.io/tag/xiao-jie.html">小结</a>    </p>
  </header>
  <div>
      <p>esl_model <a href="https://github.com/littlezz/ESL-Model">https://github.com/littlezz/ESL-Model</a><br />
今天算是弄完了第三章的代码， 放到github上面， 折腾python的打包折腾了大半天。  </p>
<p>简单总结一下Python的Package Distribution吧。<br />
有空的话， 在写一个pytest的简单总结。</p>
<h2 id="setuppy"><a name="user-content-setuppy" href="#setuppy" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>setup.py</h2>
<p>setup.py 是最主要的整个配置的文件， </p>
<p>贴我的setup.py 的代码好了。  </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;README.rst&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">readme</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">version</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="s1">&#39;esl_model&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">__version__</span>


<span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;esl_model&#39;</span><span class="p">,</span>
      <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
      <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Algorithm from The Elements of Statistical Learning book implement by Python code&quot;</span><span class="p">,</span>
      <span class="n">long_description</span><span class="o">=</span><span class="n">readme</span><span class="p">,</span>
      <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
          <span class="s1">&#39;Programming Language :: Python :: 3.5&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Programming Language :: Python :: 3 :: Only&#39;</span><span class="p">,</span>
          <span class="s1">&#39;Development Status :: 2 - Pre-Alpha&#39;</span><span class="p">,</span>
          <span class="s1">&#39;License :: OSI Approved :: MIT License&#39;</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://github.com/littlezz/ESL-Model&#39;</span><span class="p">,</span>
      <span class="n">author</span><span class="o">=</span><span class="s1">&#39;littlezz&#39;</span><span class="p">,</span>
      <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;zz.at.field@gmail.com&#39;</span><span class="p">,</span>
      <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
      <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tests*&#39;</span><span class="p">]),</span>
      <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
            <span class="s1">&#39;numpy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;pandas&#39;</span><span class="p">,</span>
            <span class="s1">&#39;scipy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sklearn&#39;</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="n">tests_require</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pytest&#39;</span><span class="p">],</span>
      <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">zip_safe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p>逐个解释参数。<br />
<code>name</code> 是你要发布的模块的名字, 只能是用小写和下划线.不要和其他的公共的模块名字冲突.  </p>
<p><code>version</code> 是版本号, 诸如 0.0.1 这样.  </p>
<p><code>description</code> 和 <code>long_description</code>是你这个项目的介绍，用于pipy上面的介绍，注意 long_description 只能使用rst格式， **不支持**markdown。   </p>
<p><code>classifiers</code>是你在pipy上面的分类， 一般在这里要只能你是否支持py2， 或py3， 或者是否有特定的平台限制。<a href="https://pypi.python.org/pypi?%3Aaction=list_classifiers">所有classifiers 列表</a>  </p>
<p><code>packages</code>, 要包含的代码的文件夹。比如我也可以设置成 <code>esl_model</code>， 但是据我观察， 这样设置之后， 我下面的子模块是没有办法使用<code>import esl_model.ch3</code> 这样载入的。<br />
所以使用find_packages自动寻找所有模块， 特别排除我的测试文件存放的文件夹。  </p>
<p><code>install_requires</code>, 依赖， 如果在虚拟环境里面的话可以用<code>pip freeze</code>来查看安装的库， 但是这里面会包含真正用到的库（比如里面可能会显示ipython）。 可以使用 pipreqs 这个库。  </p>
<p><code>tests_require</code> 这个是测试的用的, 在<code>python setup.py test</code>的时候用到, 然而我偷懒了, pytest在这里还差一步配置， 所以这里有没有都一样。。  </p>
<p><code>include_package_data</code>, 这个是包含非python代码的文件， 我的程序里面要使用到csv数据， 所以需要这个选项。  </p>
<p>我的代码结构树</p>
<div class="highlight"><pre><span></span>── LICENSE.md
├── MANIFEST.in
├── README.rst
├── esl_model
│   ├── __init__.py
│   ├── __pycache__
│   ├── base.py
│   ├── ch3
│   │   ├── __init__.py
│   │   ├── __pycache__
│   │   └── model.py
│   ├── datasets
│   │   ├── __init__.py
│   │   ├── __pycache__
│   │   ├── base.py
│   │   └── data
│   │       └── prostate.csv
│   └── utils.py
├── pytest.ini
├── setup.py
└── tests
    ├── __init__.py
    ├── __pycache__
    ├── test_ch3.py
    └── utils.py
</pre></div>


<h2 id="manifestin"><a name="user-content-manifestin" href="#manifestin" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>MANIFEST.in</h2>
<p>指定需要包含的非程序文件  </p>
<p>一般是<code>include README.rst</code> <br />
我这里因为有额外的数据， 所以要多一行。  </p>
<div class="highlight"><pre><span></span>include README.rst
recursive-include esl_model/datasets/data *.csv
</pre></div>


<p>recursive-include 必须， 不然数据不包含。  </p>
<h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>测试安装</h2>
<p><code>pip install -e .</code><br />
本地的调试安装模式。  </p>
<h2 id="ref"><a name="user-content-ref" href="#ref" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>ref</h2>
<ul>
<li>sklearn的配置文件 <a href="https://github.com/scikit-learn/scikit-learn">https://github.com/scikit-learn/scikit-learn</a>  </li>
<li>Python-packaging <a href="https://python-packaging.readthedocs.org/en/latest/testing.html">https://python-packaging.readthedocs.org/en/latest/testing.html</a></li>
</ul>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/a-fa-gou-shao-nian-yi-ji-jin-yong.html#a-fa-gou-shao-nian-yi-ji-jin-yong">阿发狗，少年以及金庸</a></h2>
    <p>
      Posted on Tue 15 March 2016 in <a href="http://littlezz.github.io/category/diary.html">diary</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>,      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>    </p>
  </header>
  <div>
      <p>阿发狗3：0打赢了李世石， 整个世界沉浸在一股人工智能毁灭人类的狂欢中， 之后李世石翻了一盘。 众人笑道：AI已经学会放水啦， 药丸药丸， 真是可怕。  </p>
<p>时至围棋界被阿发狗颠覆之际， 世界围棋第一人站了出来：就算阿发狗能打败李世石， 也打败不了我！大家定睛一看， 发现围棋第一人是个19岁少年， 于是纷纷以长辈自称， 要教他一下如何做人谦虚的人生道理。  </p>
<p>围棋大师吴清源的脑残粉金庸同学3月10日九十二岁啦， 大家有什么想对他说的， 截止2016年03月16日00:44:36， 这个问题下面排名第一的答案写了一个小故事， 大意是金庸因为写了一篇暗讽教务主任的文章被其看到后居然就被退学了， 之后金庸都不提这段高中历史， 作者给于这件事情的评价是， 『傲娇』得很的金庸。末尾不忘用一个感叹号来增强语气。  </p>
<p>我想起了周杰伦在《三年二班》里面唱到那句重复了好多遍的歌词  </p>
<p>——  </p>
<blockquote>
<p>不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 不好笑 </p>
</blockquote>
<p>这三件事情， 一点也不好笑。  </p>
<p>如果你也曾在出发时志在必得， 结果却被打得落花流水， 咬紧牙关取得一些成绩却于事无补。  </p>
<p>如果你也曾在同辈愉快玩耍的时候承受超越『年龄段』的磨练， 以此获得相应的能力， 却还是要被年长而无能者打着人生经验丰富的旗号『教育』一番。  </p>
<p>如果你也曾空怀与学校教学目标不相符的能力， 而濒临退学， 抑或被直接退学。  </p>
<p>那么， 你就会知道， 一点也不好笑。  </p>
<p></br></p>
<p>三面的三件事， 其实都可以围绕围棋展开， 第一件事李世石困兽之斗， 基本上线上和线下的人都开玩笑说是AI放水， 对之前不可一世的李世石同学的嘲讽程度可见一斑。<br />
第二件事是19岁少年的『惊人』发言， 于是大家想要教他当大人。</p>
<p>然而这些举动其实在我们的吴清源大师面前， 其实都是小儿科。<br />
不过， 大家也不关心吴清源是谁是不是？  </p>
<p>算了， 本来我还有半肚子的苦水没有得喷出来， 写到这里的时候也没有什么想说的了， 以前老是奇怪， 你说那些动物长得都一样的， 他们怎么分得清楚谁是谁？  </p>
<p>我们分不清，但是他们分得清啊。 现在想来网络上也是一样的。<br />
隔着屏幕， 谁知道后面码字的谁是谁， 在这里被恶心完之后， 接着被下一个地方恶心， 我们总用一个『傻x』来标记他们， 结果发现这个世界上怎么这么多『傻x』， 然而仔细一想， 这个词后面是无数的人， 你干掉了一个， 又冒出一个，无穷尽，辩不赢， 赢不长久， 赢了也没用。最后哪怕是呕心沥血的赢了一次，花了时间和精力， 最后得到对面甘拜下风， 低头认输， 五体投地，结果过了不久又冒出一个。  </p>
<p>所以当我发现我要写一些幼稚得不行的所谓的人生道理的时候， 我及时的把自己打住了。  </p>
<p>有非常多的话要说， 但是在写作的时候， 我已经在自己的内心里面说了一遍， 这就够了。  </p>
<p>如果有过一些相似的经历， 那么有些话是不必多说的， 如果没有过切身体会， 那么又何必多说？  </p>
<p>2016年03月16日01:58:35  </p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/linear-modelde-zong-jie.html#linear-modelde-zong-jie">Linear Model的总结</a></h2>
    <p>
      Posted on Thu 10 March 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>    </p>
  </header>
  <div>
      <h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>目录</h2>
<ul>
<li>公式</li>
<li>易混淆的名词解释</li>
<li>蛋疼的程序编写过程  </li>
</ul>
<h3 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>公式</h3>
<p>The elements of statistical learning 看到了第三章， 昨天着手于编写程序。  </p>
<p>Linear Model: </p>
<p><span class="math">\(\hat\beta = (\mathbf X^T \mathbf X)^{-1} \mathbf X^T \mathbf y\)</span></p>
<p>在这里面， <span class="math">\(\mathbf X\)</span> 先要要standardization, 然后在第一列插入全为1的列， 用于截距计算(intercept)。<br />
所以beta hat 算出来后第一项为截距。  </p>
<p><span class="math">\(\hat {\mathbf y} = \mathbf X \hat \beta\)</span> </p>
<p>对数据做预测的时候， <strong>X也要standardization</strong>， 做和你之前一样的事情， 使用和**train set一样的 mean 和 std**， 说多了都是泪啊， 我昨天晚上一个晚上都在弄这个， 因为我的要预测的x用了自己的mean 和std， 结果出来的结果不一样。  一定要使用相同的std 和mean 来处理数据。 我才想起来ng的课里面写程序的时候， pdf里面还特别提示过， 妈的， 哭晕。  </p>
<p><span class="math">\(var(\hat\beta)=(\mathbf X^T \mathbf X)^{-1}\sigma^2\)</span>  </p>
<p><span class="math">\(\hat \sigma = \frac{1}{N-p-1} \sum_{i=1}^N(y_i - \hat y_i)^2\)</span></p>
<p>然后是z-score<br />
<span class="math">\(z_j = \frac{\hat\beta_j}{\hat \sigma \sqrt v_j}\)</span></p>
<p>注意到<span class="math">\(v_j\)</span>是<span class="math">\(\mathbf X^T \mathbf X\)</span>的对角线上的第j项。<br />
所以得到stand error这里的做法是对<span class="math">\(var(\hat\beta)\)</span>对角线开平方。</p>
<p>F statistic  </p>
<p><span class="math">\(F = \frac{(RSS_0 - RSS_1)/(p_1 - p_0)}{RSS1 / (N - p_1 - 1)}\)</span></p>
<p>F statistic 用于分析去掉一些feature之后影响大不大。<br />
<span class="math">\(RSS_1\)</span> 是含有跟多feature的模型的代价， <span class="math">\(RSS_0\)</span>是去掉一些feature之后的模型的代价。  </p>
<h3 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>易混淆的名词解释</h3>
<h5 id="standardization"><a name="user-content-standardization" href="#standardization" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>standardization</h5>
<p>这个的意识是让数据的feature 的平均值为0, 然后高斯分布为1.  </p>
<p>针对的是每一个feature, 一般是<code>x = (x-x.mean(axis=0)) / x.std(asix=0, ddof=1)</code></p>
<p>默认ddof=0， 这个时候标准差（std） 是除以N的， 在机器学习里面， 一般是除以N， 但是在这本书里面， 一般是认为std的计算要除以（N-1）。  </p>
<h5 id="normalize"><a name="user-content-normalize" href="#normalize" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>normalize</h5>
<p>这个是针对每一个样例的， 比如X里面包含N组数据， 那么就是对N组数据做， 一般是把不同特征的取值范围降到同一个范围里面。  </p>
<h3 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>蛋疼的程序编写过程</h3>
<p>我花了一天， 才发现， standardization对结果是不会影响的， 是一种优化方法。<br />
但是我因为对 Test_X 的数据standardization错了, 所以结果总是不一样. 非常的尴尬.  </p>
<p>翻了sklearn的源码, 发现他里面怎么对y做了处理, 做了<code>(y-y.mean())</code>东西， 卧槽， 不合理啊。  </p>
<p>昨天写了一天， 值写了linear Regression， 后面还有一堆， 慢慢写吧。  </p>
<p>等稳定一些之后再放到github上面好了。  </p>
<p>2016年03月10日15:12:10</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/gai-lu-lun-xue-xi.html#gai-lu-lun-xue-xi">概率论学习</a></h2>
    <p>
      Posted on Fri 29 January 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
    </p>
  </header>
  <div>
      <p>所用公式都是用mathjax 写的， ( <del>奶奶的， 写死我了。</del> )  </p>
<h2 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>基本概念</h2>
<p>基本概念主要记下常用公式。</p>
<ul>
<li>P(A) 表示事件A发生的概率  </li>
<li><span class="math">\(P(A \bigcup B) = P(A) + P(B) - P(AB)\)</span>  </li>
<li>上面公式可以推广到N个事件  </li>
<li><span class="math">\(P(B \mid A)  = \frac{P(AB)}{P(A)}\)</span>  </li>
<li><span class="math">\(P(A) = P(AB)+P(A \bar B) = P(B) \cdot P(A|B) + P(\bar B) \cdot P(A| \bar B)\)</span>  </li>
</ul>
<h5 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>全概率公式</h5>
<p><span class="math">\(B_i\)</span> 是<span class="math">\(S\)</span>的完备事件组  </p>
<p><span class="math">\(P(A) = \sum_{i=1}^n P(B_i)P(A|B_i)\)</span>   </p>
<h5 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>贝叶斯公式</h5>
<p><span class="math">\(P(B_k|A) = {P(B_k A) \over P(A)} = {P(B_k)P(A|P(B_k) \over \sum_{j=1}^n P(B_j)P(A|B_j)}\)</span></p>
<h2 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>概率分布</h2>
<h4 id="0-1"><a name="user-content-0-1" href="#0-1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>0-1分布</h4>
<p><span class="math">\(X \sim 0 - 1\)</span>  </p>
<h4 id="_5"><a name="user-content-_5" href="#_5" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>二项分布</h4>
<p><span class="math">\(P\{X= k\} = C_n^kp^k(1-p)^k\)</span>  </p>
<p>记作 <span class="math">\(X \sim B(n,p)\)</span></p>
<h4 id="poisson"><a name="user-content-poisson" href="#poisson" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>poisson分布</h4>
<p><span class="math">\(P\{X= k\} = {e^{-\lambda}\lambda^k \over k!}\)</span>  </p>
<p>记作 <span class="math">\(X \sim \pi(\lambda)\)</span></p>
<h3 id="distribution-function"><a name="user-content-distribution-function" href="#distribution-function" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Distribution function</h3>
<p><span class="math">\(F(x) = P\{X \le x\}\)</span>  </p>
<h3 id="probability-density-function"><a name="user-content-probability-density-function" href="#probability-density-function" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>probability density function</h3>
<p><span class="math">\(f(x)\)</span> 是概率密度函数<br />
满足  </p>
<p><span class="math">\(P\{X \in D\} = \int_{D} f(x) {dx}\)</span>  </p>
<h3 id="_6"><a name="user-content-_6" href="#_6" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>分布</h3>
<h4 id="_7"><a name="user-content-_7" href="#_7" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>均匀分布</h4>
<p>f(x) = 1/(b-a),  x在（a,b)内， 其他的地方为0  </p>
<p><span class="math">\(X \sim U(a,b)\)</span>  </p>
<h4 id="normal"><a name="user-content-normal" href="#normal" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>正态分布 （normal）</h4>
<p><span class="math">\(X \sim N(\mu, \sigma^2)\)</span>  </p>
<p>性质<br />
- f(x) 关于 <span class="math">\(x=\mu\)</span> 对称<br />
- <span class="math">\(\sigma\)</span>越大, 最大值越大, 就是越瘦高.  <br />
- N(0, 1) 是标准正态分布  </p>
<h4 id="_8"><a name="user-content-_8" href="#_8" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>指数分布</h4>
<p><span class="math">\(f(x) = \lambda e^{-\lambda x}\)</span>, x&gt;0  </p>
<p>记作<span class="math">\(X \sim E(\lambda)\)</span></p>
<h4 id="others"><a name="user-content-others" href="#others" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>others</h4>
<p>比如 Gamma分布， <br />
<span class="math">\(X \sim \Gamma(\alpha, \beta)\)</span></p>
<p>Beta 分布<br />
<span class="math">\(X \sim \beta(a, b)\)</span></p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "0em",
        linebreak = "false";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/yao-wan-zhen-de-shi-yao-wan.html#yao-wan-zhen-de-shi-yao-wan">药丸， 真的是药丸</a></h2>
    <p>
      Posted on Wed 27 January 2016 in <a href="http://littlezz.github.io/category/diary.html">diary</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/li-ren-ge.html">里人格</a>,      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>,      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>    </p>
  </header>
  <div>
      <p>今天浪了一天， 不懂在干什么， 本来说要补一波概率论的， 结果看到第4章之后就开始乱翻书了， 然后统计学习基础那本书根本就没有看， 昨天看到『前列腺癌』的例子， 今天还是这个例子。 我很关心男性前列腺癌嘛啊？  </p>
<p>感觉真的药丸。  </p>
<p>昨天和手榴弹去吃KFC， 作死的点了一个全家桶， 嘛， 作为肥宅， kfc当然要刷全家桶啦。  </p>
<p>结果就是吃得快吐了， 肥宅力不足嘛。<br />
人家A岛上的肥宅都是单刷全家桶， 结果我们两个人也搞不完一个， 主要是汉堡， 简直是想象不出的难吃， 等吃到汉堡的时候， 进入嘴巴的东西基本已经没有什么味道了， 可是汉堡的那个面包， 用蛋蛋的话来说叫做『面饼』， （里面夹着的东西叫做『肉饼』）， 真是难吃， 难吃， 难吃。  </p>
<p>我偷偷留了两口没有吃完， 藏在汉堡盒子里面， 结果在战斗结束拍纪念照的时候被我弄了出来， 蛋蛋惊呼：『卧槽， 你作弊！居然还藏了半个面饼！』  </p>
<p>纪念照是以冷漠的肥宅为主题， 通过拍摄在成堆的K记包装盒于凌乱的可乐杯后面低头玩手机的男人， 表现肥宅刷完全家桶事后玩手机的冷漠之情。  </p>
<p><img alt="肥宅" src="../images/IMG_0593.jpg" />  </p>
<p>饭后， 天早已经全黑，走在回去的路上， 我早已直不起腰， 就算是还剩10秒的绿灯也只能放弃， 停下来等待。  </p>
<p>世界一下子陷入了缓慢的行动之中。  在这样的节奏之中， 却还是能够超过那些男女成群嘻嘻哈哈的路人，  </p>
<p>在一个十字路口之前， 蛋蛋提到了毕业， 我连能不能毕业都不知道， 这学期估计要吃退学警告咯， 我哈哈的回应道。  </p>
<p>蛋蛋自己也挂了两科， 而且是考试全部都会， 但是因为没有平时分， 结果就被老师给挂了。  </p>
<p>操， 大不了就延毕呗。  </p>
<p>不知道为何这句压在我心口的话语经他之口说出来之后， 我一下子轻松了非常多。 </p>
<p>人流在十字路口前面聚集， 在红绿灯的结束时间通过是基本规则， 没有人在乎你是不是撑得快死了。  </p>
<p>在下一个红绿灯再过马路有什么问题？<br />
如果不过红绿灯会怎么样？  </p>
<p>我不知道到。  </p>
<p>他们说， 山崩地裂， 日月无光。<br />
他们说， 你本来有一个美好的前途。<br />
他们说， 你完蛋定了啊。  </p>
<p>说完这些之后， 继续投身于和小贩对青菜能不能少一毛钱的战斗之中。  </p>
<p>我看着远处的猪肉摊， 肉头堆积成山， 屠户把猪头奋力的塞进黑色的袋子里面， 对太大的头， 用刀切成两半， 手起刀落， 骨肉四溅。 </p>
<p>在那一刻， 他是否有感受到， 大千世界曾由他主宰的快感？  </p>
<p>在那一刻， 他们是不是也因此产生了参透世界，看破轮回的感觉， 于是有了对他人做出预言的底气。  </p>
<p>我不知道如何回应， 我也不知道路的那头有什么， 途中会有弹射起步的跑车路过么？ 会中出一架大卡车么？  </p>
<p>这个学期， 加入的公司没有融到钱， 团队解散了， 但是我好歹也达成了筹够去日本剁手的钱的目的。   </p>
<p>干了一个学期， 目的是达成了， 自己也开始有了新的作死计划， 开始看起了机器学习， 两年前， 我还在嚷嚷着， 写程序要什么数学？<br />
两年后， 我看着那些书中中出的各种的公式， 简直就像是被中出一样。  </p>
<p>摸摸自己的额头， 擦了把汗， 我果然还是想要试一下啊。<br />
于是Ng的课算是上完了， 你要问我记住了什么， 说一句实话， 对不起，什么也没有记住。  </p>
<p>毕不了业， 药丸， 毕得了业， 之后等着的也是找工作， 下一个十字路口，药丸。 找到了工作， 浑水摸鱼， 虚度光阴， 药丸。  摸滚打爬， 事业有成， 娶不到老婆， 药丸。  取到了老婆， 以前吃的化学添加剂太多， 生不出小孩， 药丸。  小孩成绩不好， 药丸。<br />
事业有成， 取了老婆， 生了小孩， 头发掉光了， 药丸。<br />
腰酸背痛， 药丸。<br />
前列腺炎， 药丸。<br />
老眼昏花， 药丸。<br />
年事已高， 大小便失禁， 卧床不起， 病房外的小孩因为一个发烧感冒要打针吃药就大喊大叫的， 看着自己浑身插满的管子， <br />
这一次没有人说你药丸了。  </p>
<p>但是你我都知道，这下是真的要完了。  </p>
<p>弗洛伊德分析法， 我们总是药丸。<br />
不管做什么， 只要『他们』想， 你都是药丸。  </p>
<p>和蛋蛋在十字路口道别， 我转身没入小区的夜色之中， 在回去的路上， 我已经放弃思考『为什么 <strong>他们</strong> 总是赢？』这样无解的问题了。   <br />
蛋蛋说， 赶紧回去， 我要去杀僵尸了， 一斧子砍爆僵尸的头。 特别爽。 <br />
我也赶着回去捞新船。  </p>
<blockquote>
<p>让一让, 母牛们, 人生短暂啊!  </p>
</blockquote>
<p>当他的奶牛们疯狂繁殖， 每天开着宴会， 结果吃得差点撑死。<br />
当他真的需要钱给女儿上学的时候， 奶牛却不在繁殖， 失去了上帝眷顾的又老又聋的他和情人挨家挨户的卖自己徒手制作的小彩票。  最后病死。</p>
<p>随着年龄的增长和阅历的增加， 我越来越觉得这个世界的疯狂程度，有过之而无不及。  </p>
<p>教授问我， 啊？你怎么现在就出去工作了？ 我干笑。<br />
公司的运营总监问我， 你还没有毕业啊？你的工作就是给CTO打杂的么？  我笑笑。  </p>
<p>面对『他们』发出的这种疑问， 这种暴露自己早已没有任何想象力的疑问， 以及发生的很多事情， 挂科也好， 作为差生中的差生也好， 其实我他妈是不服的。<br />
我没有那种生来就上天入地扭曲现实的能力，但是却也不认为是被上帝抛弃的人，    </p>
<p>或许， 这就是普通吧。  </p>
<p>普通的焦虑着。  <br />
普通的痛苦着。 <br />
普通的挣扎着。  </p>
<p>正因为普通， 所以为了不沦落成『他们』， 不得不经历不普通的事情， 为了在以后， 能遇上和自己一样挣扎的普通人。  </p>
<p>说说那天接下来的事情吧， 之后我回家就接着玩船去了， 吃得撑了，加上玩了3个小时， 而且有差不多一个小时都在刷同一个图（1-5），精神已经恍惚了， 结果大破进击了。  </p>
<p>我之前有一点犹豫， 迷迷糊糊的，不确定到底有没有大破， 当选完阵型， 看到我大破的小学生的时候， 我整个人一下就蒙蔽了， 吓出了一身冷汗， 『卧槽， 我要粪提了』， 赶紧F5， 重进游戏之后看到自己的小学生还在。 松了一口气， 事后大佬告诉我在选阵型之前F5才有效， 这次存粹是运气好吧了。  </p>
<p>差点药丸， 运气好而已， 但是如果真的沉船了， 可能我也会和基友倾诉一下， 药丸药丸，然后接着玩下去。  </p>
<p>药丸。<br />
药丸。  </p>
<p>虽然各种药丸， 一不小心就药丸。但是还是得走下去， 因为，   </p>
<p>当我们大喊着药丸的时候，你我都知道， 这还不是真正的 <strong>要完</strong> </p>
<p>2016年01月28日03:32:37</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://littlezz.github.io/ng-machine-learning-week-11.html#ng-machine-learning-week-11">Ng Machine Learning Week 11</a></h2>
    <p>
      Posted on Sun 24 January 2016 in <a href="http://littlezz.github.io/category/machine-learning.html">Machine-Learning</a>
      &#8226; Tagged with
      <a href="http://littlezz.github.io/tag/ji-qi-xue-xi.html">机器学习</a>,      <a href="http://littlezz.github.io/tag/xia-che.html">瞎扯</a>,      <a href="http://littlezz.github.io/tag/ri-ji.html">日记</a>    </p>
  </header>
  <div>
      <p>第十一周说的是处理图片， 介绍了滑动窗口， 如何获得（制造）更多的数据， 还有在pipeline 中的上限分析， 这个是用来决定在系统中应该跟加关心那些模块的优化， 哪些模块就算优化了效果也比较小。  当然了， 喜闻乐见的黑了一下『我认识的人』， 花了18个月去优化一个没有太大效果的模块。  </p>
<h4 id="_1"><a name="user-content-_1" href="#_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>滑动窗口</h4>
<p>图片处理的时候是训练识别一小块， 然后滑动窗口来在大图中寻找是否找到。 比如你的样本都是 10x10 的大小， 然后等比例缩放， 在原图中你也可以找 50x50 的, 但是对于这个范围， 你得缩小到10x10， 然后在来识别。  </p>
<h4 id="_2"><a name="user-content-_2" href="#_2" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>展开</h4>
<p>里面还顺带提及了， 什么展开（好吧我不记得具体的名字了）， 在识别图像里面的文字的时候， 首先要找到包含文字的区域， 比如标记为白色， 然后这些白色向周围扩散， 比如20个像素点， 如果这之中也有其他的文字区域（即白色）， 着把他们连成一块大的白色区域。</p>
<h4 id="_3"><a name="user-content-_3" href="#_3" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>制造数据</h4>
<p>用现有样本， 加上噪声之类的， 得到新的训练数据。<br />
他建议在解决问题前， 先算一下如果我要得到10倍的训练数据， 我需要多大的代价， 比如人工10秒做一次判断， 那么如果我有新的10k条数据， 可能就是人工工作几天， 但是我得到了更加多的数据， 也就是说， 我的训练结果得到了一个巨大的提升。   </p>
<h4 id="_4"><a name="user-content-_4" href="#_4" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>上限分析</h4>
<p>先要模块化， 然后重头开始给于一个模块绝对正确的预测结果给下一个模块， 计算其中系统正确率的变化。<br />
然后就可以明确的知道哪些模块不需要花精力啦（<del>前提是你得弄成pipeline， 一般自己写的话都是大杂烩吧</del>）<br />
同时不忘黑那个18个月的哥们，<del>这家伙我好想在第一周的时候感觉就听说过他了</del>。  </p>
<h4 id="_5"><a name="user-content-_5" href="#_5" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>终结</h4>
<p>最后的最后， Andrew 结束词的时候， 我非常的感动（才没有哭！）， 这是我大学之后， 上过的第一门真正体现『传道， 授业， 解惑』的课。<del>（大学上的那个不叫课， 叫吃屎）</del> </p>
<p>我还记得第三周的时候， 介绍各种优化， 他坦然的承认自己搞了10年对于这些优化也是最近才渐渐明白里面的原理， 我隔着屏幕， 跨越时空， 哈哈哈的笑着。  </p>
<p>我还记得， 当我们上完线性回归和logic回归的时候， 他说， 你们现在已经比大多数硅谷工作的工程师更加懂机器学习了， 他们中有很多人靠机器学习赚到了许多钱， 或者帮助公司取得成功。 然后露出一个诙谐的笑容时候， 我也跟着笑着， 这家伙， 整天黑硅谷的人。  </p>
<p>我还记得当他鼓励完我们， 接着告诉我们， 他还有更厉害的东西要教授我们的时候， 我真的觉得接下来要得到巨大力量， 倍感兴奋。 </p>
<p>就在最后， 他说， 同学们， 谢谢你们， 我知道你们当中很多人花了大量的时间的来学习， 同时花了大量的时间做哪些长度很长的编程题目，希望你们能在自己的领域利用机器学习取得成功， 希望你们能够让更多的人生活得更美好的时候。  </p>
<p>我觉得这个祝福一点也不畸形， 我觉得他有资格对他的学生们说希望你们改变世界， 当他说出这句话的时候， 我没有丝毫的觉得矫揉造作， 而是觉得， 理应如此。</p>
<p>因为，<br />
师者，传道授业解惑者也。  </p>
<p>我知道我已经严重偏题了， 这些东西都应该归类到个人日记那一块， 而且我也知道反正也没有人看，但是我还是想在一个属于『公开』的地方， 写下此时此刻的想法。  </p>
<p>我觉得人的能力真的不是最重要的， 最重要的是他对这个世界， 对其他的人，对周边的事物还存有的一份爱意， 还相信自己在任何情况下都存在着可能性。<br />
这些才是最重要的， 那些所谓的能力， 终究是科学训练的产物， 这个世界对于我们真正的考验， 是科学之外的东西。  </p>
<p>所以， 爱因斯坦说， </p>
<blockquote>
<p>一个人在智力上的成就很大程度上取决于人格的伟大，这一点往往超出人们通常的认识。  </p>
</blockquote>
<p>因为，我们还有很长的路要走。</p>
<p>以上。  </p>
<p>2016年01月24日21:29:36</p>
  </div>
</article>

  <div class="pagination">
    <a class="btn" href="http://littlezz.github.io/index3.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
    <a class="btn float-right" href="http://littlezz.github.io/index.html">
      Newer Posts <i class="fa fa-angle-right"></i>
    </a>
  </div>

    <footer>
        <p>&copy; littlezz 2017</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " littlezz's Blog ",
  "url" : "http://littlezz.github.io",
  "image": "/images/logo.jpg",
  "description": "littlezz's Thoughts and Writings About Python And Machine Learning and diary"
}
</script></body>
</html>